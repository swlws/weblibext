{"version":3,"file":"weblibext.cjs.js","sources":["../src/StringUtil.ts","../src/Tool.ts","../src/DomUtil.ts","../src/TimeUtil.ts","../src/EventBus.ts","../src/RegUtil.ts"],"sourcesContent":["import base64 from \"Base64\";\n\n/**\n * 随机字符串\n */\nexport function makeRandom() {\n  return (Math.random() / +new Date()).toString(36).replace(/\\d/g, \"\").slice(1);\n}\n\n/**\n * 字符串转小驼峰\n * @param {String} str --a-_b--- => aBC\n */\nexport function camelCase(str: string) {\n  if (!str) return \"\";\n\n  // 去除收尾的空格、横线、下划线\n  const tmp = str.replace(/^[_\\-\\s]*|[_\\-\\s]*$/g, \"\");\n  return tmp.replace(/[-_\\s]+(\\w)/g, (substr, $1) => $1.toUpperCase());\n}\n\n/**\n * 字符串首字母大写\n */\nexport function upperFirst(str: string) {\n  if (!str.trim()) return \"\";\n\n  return str.trim().replace(/^\\w/, ($1) => $1.toUpperCase());\n}\n\n/**\n * rgb转hex\n *\n * @param color\n * @returns\n */\nexport function rgbToHex(color: string) {\n  const values = color.replace(/(rgba?|[()]+|\\s+)/g, \"\").split(\",\");\n\n  const r = parseInt(values[0]) || 0;\n  const g = parseInt(values[1]) || 0;\n  const b = parseInt(values[2]) || 0;\n\n  return ((r << 16) + (g << 8) + b).toString(16).padStart(6, \"0\");\n}\n\n/**\n * hex转rgba\n * @param {String} color\n * @param {Float} alp\n */\nexport function hexToRgba(color: string, alp: number) {\n  const tmp = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(color);\n  if (!tmp) return \"\";\n\n  const r = parseInt(tmp[1], 16);\n  const g = parseInt(tmp[2], 16);\n  const b = parseInt(tmp[3], 16);\n  const a = alp;\n\n  return `rgba(${r},${g},${b},${a})`;\n}\n\n/**\n * rgba转rgb\n * @param {String} color\n */\nexport function rgbaToRgb(color: string) {\n  const values = color.replace(/(rgba?|[()]+|\\s+)/g, \"\").split(\",\");\n\n  const a = parseFloat(values[3]) || 1;\n  const r = Math.floor(a * parseInt(values[0]) + (1 - a) * 255);\n  const g = Math.floor(a * parseInt(values[1]) + (1 - a) * 255);\n  const b = Math.floor(a * parseInt(values[2]) + (1 - a) * 255);\n\n  const rr = \"0\" + r.toString(16).slice(-2);\n  const gg = \"0\" + g.toString(16).slice(-2);\n  const bb = \"0\" + b.toString(16).slice(-2);\n\n  return `#${rr}${gg}${bb}`;\n}\n\n/**\n * base64编码，兼容中文\n *\n * @param str\n * @returns\n */\nexport function encode(str: string) {\n  return base64.btoa(window.encodeURIComponent(str));\n}\n\n/**\n * base64解码，兼容中文\n *\n * @param str\n * @returns\n */\nexport function decode(str: string) {\n  return window.decodeURIComponent(base64.atob(str));\n}\n","import { PlainObject } from \"@type/index\";\n\nexport const isObject = (val: any) => getObjectType(val);\n\n/**\n * 获取数据类型\n *\n * @param obj\n * @returns\n */\nexport function getObjectType(obj: any) {\n  return obj === null\n    ? \"null\"\n    : obj instanceof Array\n    ? \"array\"\n    : typeof obj !== \"object\"\n    ? typeof obj\n    : \"object\";\n}\n\n/**\n * 深拷贝\n *\n * @param obj\n * @returns\n */\nexport function deepClone(obj: any) {\n  const type = getObjectType(obj);\n  if (type === \"object\") {\n    const res: PlainObject = {};\n    Object.keys(obj).forEach((key) => {\n      res[key] = deepClone(obj[key]);\n    });\n    return res;\n  }\n\n  if (type === \"array\") {\n    const res: any[] = [];\n    obj.forEach((item: any) => {\n      res.push(deepClone(item));\n    });\n    return res;\n  }\n  return obj;\n}\n\n/**\n * 读cookie\n * @param key\n * @returns\n */\nexport function getCookie(key: string) {\n  const name = key + \"=\";\n  const ca = document.cookie.split(\";\");\n  for (let i = 0, len = ca.length; i < len; i++) {\n    let c = ca[i];\n    while (c.charAt(0) === \" \") {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) !== -1) {\n      return c.substring(name.length, c.length);\n    }\n  }\n\n  return \"\";\n}\n\n/**\n * 函数节流，一个周期内仅执行一次\n *\n * @param fn\n * @param wait\n */\nexport function throttle(fn: any, wait = 300, that?: any) {\n  let timer: any = null;\n\n  return function (...rest: any[]) {\n    if (typeof fn !== \"function\") return;\n    if (!timer) {\n      timer = setTimeout(() => {\n        timer = null;\n        fn.call(that, ...rest);\n      }, wait);\n    }\n  };\n}\n\n/**\n * 函数防抖\n * 连续触发N次，仅在最后一次执行\n *\n * @param fn\n * @param wait\n */\nexport function debounce(fn: any, wait = 300, that?: any) {\n  let timer: any = null;\n\n  return function (...rest: any[]) {\n    if (typeof fn !== \"function\") return;\n\n    clearTimeout(timer);\n    timer = setTimeout(fn.bind(that, ...rest), wait);\n  };\n}\n\n/**\n * 获取数组、集合、Map的最后一项\n * @param list\n */\nexport function lastItem(list: any[] | Set<any> | Map<any, any>) {\n  if (Array.isArray(list)) {\n    return list.slice(-1)[0];\n  }\n\n  if (list instanceof Set) {\n    return Array.from(list).slice(-1)[0];\n  }\n\n  if (list instanceof Map) {\n    return Array.from(list.values()).slice(-1)[0];\n  }\n}\n\n/**\n * 序列化，可以处理Set、Map、Function\n */\nexport const stringify = (() => {\n  const replacer = (key: any, val: any) => {\n    if (typeof val === \"symbol\") {\n      return val.toString();\n    }\n    if (val instanceof Set) {\n      return Array.from(val);\n    }\n    if (val instanceof Map) {\n      return Array.from(val.entries());\n    }\n    if (typeof val === \"function\") {\n      return val.toString();\n    }\n    return val;\n  };\n\n  return (obj: any, spaces = 0) => JSON.stringify(obj, replacer, spaces);\n})();\n\n/**\n * 顺序执行Promise队列\n */\nexport const asyncSequentializer = (() => {\n  const toPromise = (x: any) => {\n    if (x instanceof Promise) {\n      return x;\n    }\n\n    if (typeof x === \"function\") {\n      // if function is not async this will turn its result into a promise\n      // if it is async this will await for the result\n      return (async () => await x())();\n    }\n\n    return Promise.resolve(x);\n  };\n\n  return (list: any[]) => {\n    const results: any[] = [];\n\n    return (\n      list\n        .reduce((lastPromise, currentPromise) => {\n          return lastPromise.then((res: any) => {\n            results.push(res); // collect the results\n            return toPromise(currentPromise);\n          });\n        }, toPromise(list.shift()))\n        // collect the final result and return the array of results as resolved promise\n        .then((res: any) => Promise.resolve([...results, res]))\n    );\n  };\n})();\n\n/**\n * 轮询，直到返回为true\n *\n * @param fn\n * @param validate\n * @param interval\n */\nexport async function poll(fn: Function, validate: Function, interval = 2500) {\n  const resolver = async (resolve: any, reject: any) => {\n    try {\n      const result = await fn();\n      const valid = validate(result);\n      if (valid === true) {\n        resolve(result);\n      } else if (valid === false) {\n        // https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout\n        // settimeout可以接受多个参数，多余的参数会传递到回掉函数中\n        setTimeout(resolver, interval, resolve, reject);\n      }\n    } catch (e) {\n      reject(e);\n    }\n  };\n  return new Promise(resolver);\n}\n\n/**\n * 找到树的第一个叶子节点\n */\nexport function findFirstLeafNode(arr: any[], childKey = \"child\") {\n  if (!Array.isArray(arr) || arr.length === 0) return undefined;\n\n  let child = [...arr];\n  let obj = child.shift();\n  while (Array.isArray(obj[childKey]) && obj[childKey].length > 0) {\n    child = [...obj[childKey]];\n    obj = child.shift();\n  }\n\n  return obj;\n}\n\n/**\n * 生成一颗树\n *\n * @param data\n * @param config\n * @returns\n */\nexport function makeTree(\n  data: PlainObject[],\n  config = { id: \"id\", pid: \"pid\" }\n) {\n  if (!Array.isArray(data)) {\n    return [];\n  }\n\n  const { id: _id, pid: _pid } = config;\n  const map = data.reduce((_map, item) => {\n    item.__id__ = item[_id];\n    item.__pid__ = item[_pid];\n    item.child = [];\n    _map[item.__id__] = item;\n    return _map;\n  }, {});\n\n  const set = new Set(Object.keys(map));\n  Object.keys(map).forEach((key) => {\n    const item = map[key];\n    const pid = item.__pid__;\n    const pItem = map[pid];\n    if (!pItem) return;\n    pItem.child.push(item);\n    set.delete(item.__id__);\n    Reflect.deleteProperty(item, \"__id__\");\n    Reflect.deleteProperty(item, \"__pid__\");\n  });\n\n  return Array.from(set.values()).map((id) => {\n    const item = { ...map[id] };\n    item[_id] = item.__id__;\n    item[_pid] = item.__pid__;\n    Reflect.deleteProperty(item, \"__id__\");\n    Reflect.deleteProperty(item, \"__pid__\");\n    return item;\n  });\n}\n","import { PlainObject } from \"@type/index\";\nimport { camelCase } from \"./StringUtil\";\nimport { isObject } from \"./Tool\";\n\n/**\n * 设备类型获取\n */\nexport function getDeviceType() {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n    navigator.userAgent\n  )\n    ? \"Mobile\"\n    : \"Desktop\";\n}\n\n/**\n * URL参数解析\n * @param url\n * parseURLParameters(\"http://url.com/page?age=123&sname=ddd\"); // {age: \"123\", name: \"ddd\"}\n */\nexport function parseURLParameters(url: string) {\n  return (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce(\n    (a: PlainObject, v) => (\n      (a[v.slice(0, v.indexOf(\"=\"))] = v.slice(v.indexOf(\"=\") + 1)), a\n    ),\n    {}\n  );\n}\n\nconst trim = function (s: string) {\n  return (s || \"\").replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, \"\");\n};\n\n/**\n * 注册事件\n *\n * @param element\n * @param event\n * @param handler\n * @param useCapture\n */\nexport const on = function (\n  element: HTMLElement | Document | Window,\n  event: string,\n  handler: EventListenerOrEventListenerObject,\n  useCapture = false\n): void {\n  if (element && event && handler) {\n    element.addEventListener(event, handler, useCapture);\n  }\n};\n\n/**\n * 移除事件\n *\n * @param element\n * @param event\n * @param handler\n * @param useCapture\n */\nexport const off = function (\n  element: HTMLElement | Document | Window,\n  event: string,\n  handler: EventListenerOrEventListenerObject,\n  useCapture = false\n): void {\n  if (element && event && handler) {\n    element.removeEventListener(event, handler, useCapture);\n  }\n};\n\n/**\n * 仅触发一次的事件\n *\n * @param el\n * @param event\n * @param fn\n */\nexport const once = function (\n  el: HTMLElement,\n  event: string,\n  fn: EventListener\n): void {\n  const listener = function (...args: unknown[]) {\n    if (fn) {\n      fn.apply(this, args as any);\n    }\n    off(el, event, listener);\n  };\n  on(el, event, listener);\n};\n\n/**\n * 判断元素是否具有某个class\n *\n * @param el\n * @param cls\n * @returns\n */\nexport function hasClass(el: HTMLElement, cls: string): boolean {\n  if (!el || !cls) return false;\n  if (cls.indexOf(\" \") !== -1)\n    throw new Error(\"className should not contain space.\");\n  if (el.classList) {\n    return el.classList.contains(cls);\n  } else {\n    return (\" \" + el.className + \" \").indexOf(\" \" + cls + \" \") > -1;\n  }\n}\n\n/**\n * 给元素添加多个class\n *\n * @param el\n * @param cls \"abc efg\"\n * @returns\n */\nexport function addClass(el: HTMLElement, cls: string): void {\n  if (!el) return;\n  let curClass = el.className;\n  const classes = (cls || \"\").split(\" \");\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.add(clsName);\n    } else if (!hasClass(el, clsName)) {\n      curClass += \" \" + clsName;\n    }\n  }\n  if (!el.classList) {\n    el.className = curClass;\n  }\n}\n\n/**\n * 移除多个class\n *\n * @param el\n * @param cls \"abc efg\"\n * @returns\n */\nexport function removeClass(el: HTMLElement, cls: string): void {\n  if (!el || !cls) return;\n  const classes = cls.split(\" \");\n  let curClass = \" \" + el.className + \" \";\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.remove(clsName);\n    } else if (hasClass(el, clsName)) {\n      curClass = curClass.replace(\" \" + clsName + \" \", \" \");\n    }\n  }\n  if (!el.classList) {\n    el.className = trim(curClass);\n  }\n}\n\n/**\n * 获取元素的某个样式\n *\n * @param element\n * @param styleName\n * @returns\n */\nexport const getStyle = function (\n  element: HTMLElement,\n  styleName: string\n): string | null {\n  styleName = camelCase(styleName);\n  if (styleName === \"float\") {\n    styleName = \"cssFloat\";\n  }\n  try {\n    const style = (element.style as PlainObject)[styleName];\n    if (style) return style;\n\n    if (!document || !document.defaultView) return \"\";\n\n    const computed = document.defaultView.getComputedStyle(element, \"\");\n    return computed ? (computed as PlainObject)[styleName] : \"\";\n  } catch (e) {\n    return (element.style as PlainObject)[styleName];\n  }\n};\n\n/**\n * 修改元素样式\n *\n * @param element\n * @param styleName\n * @param value\n * @returns\n */\nexport function setStyle(\n  element: HTMLElement,\n  styleName: CSSStyleDeclaration | string,\n  value?: string\n): void {\n  if (!element || !styleName) return;\n\n  if (isObject(styleName)) {\n    Object.keys(styleName).forEach((prop) => {\n      setStyle(element, prop, (styleName as PlainObject)[prop]);\n    });\n  } else {\n    styleName = camelCase(styleName as string);\n    (element.style as PlainObject)[styleName as string] = value;\n  }\n}\n\n/**\n * 移除元素样式\n *\n * @param element\n * @param style\n * @returns\n */\nexport function removeStyle(\n  element: HTMLElement,\n  style: CSSStyleDeclaration | string\n) {\n  if (!element || !style) return;\n\n  if (isObject(style)) {\n    Object.keys(style).forEach((prop) => {\n      setStyle(element, prop, \"\");\n    });\n  } else {\n    setStyle(element, style, \"\");\n  }\n}\n\n/**\n * 是否允许滚动\n *\n * @param el\n * @param isVertical\n * @returns\n */\nexport const isScroll = (el: HTMLElement, isVertical?: boolean): boolean => {\n  const determinedDirection = isVertical === null || isVertical === undefined;\n  const overflow = determinedDirection\n    ? getStyle(el, \"overflow\")\n    : isVertical\n    ? getStyle(el, \"overflow-y\")\n    : getStyle(el, \"overflow-x\");\n\n  if (!overflow) return false;\n\n  let len = overflow.match(/(scroll|auto)/)?.length;\n  if (!len) return false;\n  return true;\n};\n\n/**\n * 获取元素的滚动盒子\n *\n * @param el\n * @param isVertical\n * @returns\n */\nexport const getScrollContainer = (\n  el: HTMLElement,\n  isVertical?: boolean\n): Window | HTMLElement => {\n  let parent: HTMLElement = el;\n  while (parent) {\n    if ([window, document, document.documentElement].includes(parent)) {\n      return window;\n    }\n    if (isScroll(parent, isVertical)) {\n      return parent;\n    }\n    parent = parent.parentNode as HTMLElement;\n  }\n  return parent;\n};\n\n/**\n * 指定元素是否在另一元素包裹中\n *\n * @param el\n * @param container\n * @returns\n */\nexport const isInContainer = (\n  el: HTMLElement,\n  container: HTMLElement\n): boolean => {\n  if (!el || !container) return false;\n\n  const elRect = el.getBoundingClientRect();\n  let containerRect: PlainObject;\n\n  if (\n    [window, document, document.documentElement, null, undefined].includes(\n      container\n    )\n  ) {\n    containerRect = {\n      top: 0,\n      right: window.innerWidth,\n      bottom: window.innerHeight,\n      left: 0,\n    };\n  } else {\n    containerRect = container.getBoundingClientRect();\n  }\n\n  return (\n    elRect.top < containerRect.bottom &&\n    elRect.bottom > containerRect.top &&\n    elRect.right > containerRect.left &&\n    elRect.left < containerRect.right\n  );\n};\n\n/**\n * 元素距离文档顶部的位置\n *\n * @param el\n * @returns\n */\nexport const getOffsetTop = (el: HTMLElement) => {\n  let offset = 0;\n  let parent = el;\n\n  while (parent) {\n    offset += parent.offsetTop;\n    parent = parent.offsetParent as HTMLElement;\n  }\n\n  return offset;\n};\n\n/**\n * 两元素顶部位置差\n *\n * @param el\n * @param containerEl\n * @returns\n */\nexport const getOffsetTopDistance = (\n  el: HTMLElement,\n  containerEl: HTMLElement\n) => {\n  return Math.abs(getOffsetTop(el) - getOffsetTop(containerEl));\n};\n\n/**\n * 节点在浏览器窗口中的位置\n * @param{domNode} element 起始节点\n */\nexport function getElementOffsetRoot(element: any) {\n  if (!element) return { left: 0, top: 0 };\n\n  let actualTop = element.offsetTop;\n  let actualLeft = element.offsetLeft;\n  let current = element.offsetParent;\n\n  while (current !== null) {\n    actualTop += current.offsetTop;\n    actualLeft += current.offsetLeft;\n\n    current = current.offsetParent;\n  }\n\n  const scroll = getTotalScrollOffsetRoot(element);\n  return {\n    top: actualTop - scroll.height,\n    left: actualLeft - scroll.width,\n  };\n}\n\n/**\n * 在执行元素上触发指定的事件，且可传递自定义事件\n *\n * @param el\n * @param eventType\n * @param detail\n *\n * eg：triggerEvent(document.getElementById('id'), 'click', {name: '123'})\n */\nexport function triggerEvent(\n  el: HTMLElement,\n  eventType: string,\n  detail: PlainObject\n) {\n  el.dispatchEvent(new CustomEvent(eventType, { detail }));\n}\n\n/**\n * 查找指定具备ClassName的父节点\n * @param pClassName\n * @param currentTarget\n * @param rootNode\n * @returns\n */\nexport function lookupParentNodeByClassName(\n  pClassName: string,\n  currentTarget: HTMLElement,\n  rootNode: HTMLElement\n) {\n  if (currentTarget === rootNode) {\n    return null;\n  }\n\n  if (rootNode && !rootNode.contains(currentTarget)) {\n    return null;\n  }\n\n  let tmp: HTMLElement | null = currentTarget;\n  while (tmp !== null && tmp !== rootNode) {\n    const classList = tmp.classList;\n    if (classList.contains(pClassName)) {\n      return tmp;\n    }\n\n    tmp = tmp.parentElement;\n  }\n\n  return null;\n}\n\n/**\n * DOM事件代理\n *\n * @param pEl\n * @param cb\n * @param itemClass\n */\nexport function clickProxy(\n  pEl: HTMLElement,\n  cb: (target: HTMLElement) => void,\n  itemClass = \"item\"\n) {\n  on(pEl, \"click\", (event) => {\n    const target = lookupParentNodeByClassName(\n      itemClass,\n      event.target as HTMLElement,\n      pEl\n    );\n    if (!target) return;\n\n    cb(target);\n  });\n}\n\n/**\n * 判断指定元素是否在可视窗口中\n *\n * @param el\n * @param partiallyVisible true为完全可见；false为完全可见\n */\nexport function elementIsVisibleInViewport(\n  el: HTMLElement,\n  partiallyVisible = false\n) {\n  const { top, left, bottom, right } = el.getBoundingClientRect();\n  const { innerHeight, innerWidth } = window;\n  return partiallyVisible\n    ? ((top > 0 && top < innerHeight) ||\n        (bottom > 0 && bottom < innerHeight)) &&\n        ((left > 0 && left < innerWidth) || (right > 0 && right < innerWidth))\n    : top >= 0 && left >= 0 && bottom <= innerHeight && right <= innerWidth;\n}\n\n/**\n * 是否滚动到底部\n *\n * @param target\n * @returns\n */\nexport function isScrollBottom(target: HTMLElement) {\n  const clientHeight = target.clientHeight;\n  const scrollTop = target.scrollTop;\n  const scrollHeight = target.scrollHeight;\n\n  if (scrollHeight - scrollTop === clientHeight) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * 获取浏览器窗口的大小\n */\nexport function getViewport() {\n  if (document.compatMode === \"BackCompat\") {\n    return {\n      width: document.body.clientWidth,\n      height: document.body.clientHeight,\n    };\n  } else {\n    return {\n      width: document.documentElement.clientWidth,\n      height: document.documentElement.clientHeight,\n    };\n  }\n}\n\n/**\n * 相对于根节点的所有滚动总和\n * @param{domNode} element 起始节点\n */\nexport function getTotalScrollOffsetRoot(element: any) {\n  let width = 0,\n    height = 0;\n\n  let pNode = element.parentNode;\n  while (pNode !== null && pNode !== document) {\n    width += pNode.scrollLeft;\n    height += pNode.scrollTop;\n\n    pNode = pNode.parentNode;\n  }\n\n  return { width: width, height: height };\n}\n\n/**\n * 将字符串拷贝到粘贴板\n * @param str\n * @returns\n */\nexport function copyToClipboard(str: string) {\n  const el = document.createElement(\"textarea\");\n  el.value = str;\n  el.setAttribute(\"readonly\", \"readonly\");\n  el.style.position = \"absolute\";\n  el.style.left = \"-9999px\";\n  document.body.appendChild(el);\n\n  const selection = window.getSelection();\n\n  el.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(el);\n\n  if (!selection) return;\n\n  const selected = selection.rangeCount > 0 ? selection.getRangeAt(0) : false;\n  if (selected) {\n    selection.removeAllRanges();\n    selection.addRange(selected);\n  }\n}\n\n/**\n * 通过a标签下载文件\n * @param url\n * @returns\n */\nexport function downFileByUrl(url: string) {\n  if (!url) return;\n\n  const fileName = url.slice(url.lastIndexOf(\"/\") + 1, url.length);\n\n  const tempLink = document.createElement(\"a\");\n  tempLink.style.display = \"none\";\n  tempLink.href = url;\n  tempLink.setAttribute(\"download\", decodeURI(fileName)); // 兼容：某些浏览器不支持HTML5的download属性\n\n  if (typeof tempLink.download === \"undefined\") {\n    tempLink.setAttribute(\"target\", \"_blank\");\n  }\n\n  document.body.appendChild(tempLink);\n  tempLink.click();\n  document.body.removeChild(tempLink);\n}\n\n/**\n * 将Blob数据一文件形式下载\n * @param binary 待转换的二进制数据\n * @param filename 待下载的文件名 res.headers['content-disposition'].match(/filename=(.*)/)[1];\n * @param type MIME 类型 res.headers['content-type']\n */\nexport function convertRes2Blob(binary: any, filename: string, type: string) {\n  // 将二进制流转为blob\n  const blob = new Blob([binary], { type });\n  if (typeof window.navigator.msSaveBlob !== \"undefined\") {\n    // 兼容IE，window.navigator.msSaveBlob：以本地方式保存文件\n    window.navigator.msSaveBlob(blob, decodeURI(filename));\n  } else {\n    // 创建新的URL并指向File对象或者Blob对象的地址\n    const blobURL = window.URL.createObjectURL(blob);\n\n    const tempLink = document.createElement(\"a\");\n    tempLink.style.display = \"none\";\n    tempLink.href = blobURL;\n    tempLink.setAttribute(\"download\", decodeURI(filename)); // 兼容：某些浏览器不支持HTML5的download属性\n\n    if (typeof tempLink.download === \"undefined\") {\n      tempLink.setAttribute(\"target\", \"_blank\");\n    }\n\n    document.body.appendChild(tempLink);\n    tempLink.click();\n    document.body.removeChild(tempLink);\n    window.URL.revokeObjectURL(blobURL);\n  }\n}\n","/**\n * 将时间统一转化为Date标准格式\n *\n * @param time\n * @returns\n */\nfunction toDate(time: Date | string | number): Date {\n  if (typeof time === \"object\") {\n    return time;\n  }\n\n  if (typeof time === \"string\") {\n    if (/^[0-9]+$/.test(time)) {\n      time = parseInt(time);\n    } else {\n      // 将ISO Date格式修改为GMT的时间格式\n      // 2021-02-26T04:02:57:677Z\n      // 2021-02-26T04:02:57.677Z\n      time = time.replace(/:(.{3}z)$/gi, (str, $1) => {\n        return `.${$1}`;\n      });\n    }\n  }\n\n  if (typeof time === \"number\" && time.toString().length === 10) {\n    time = time * 1000;\n  }\n\n  return new Date(time as number);\n}\n\n/**\n * 解析时间\n *\n * @param time\n * @param format\n * @returns\n */\nexport function parseTime(\n  time: Date | string | number,\n  format = \"{y}-{m}-{d} {h}:{i}:{s}\"\n): string | null {\n  if (arguments.length === 0 || !time) {\n    return null;\n  }\n\n  const date: Date = toDate(time);\n\n  const formatObj = {\n    y: date.getFullYear(),\n    m: date.getMonth() + 1,\n    d: date.getDate(),\n    h: date.getHours(),\n    i: date.getMinutes(),\n    s: date.getSeconds(),\n    a: date.getDay(),\n  };\n  const time_str = format.replace(/{([ymdhisa])+}/g, (result, key) => {\n    const value = (formatObj as any)[key];\n    if (key === \"a\") {\n      return [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"][value];\n    }\n    return value.toString().padStart(2, \"0\");\n  });\n  return time_str;\n}\n\n/**\n * 将时间格式化\n *\n * @param time\n * @param option\n * @returns\n */\nexport function formatTime(time: Date | string | number, option?: string) {\n  const d = toDate(time);\n  const now = Date.now();\n  const diff = (now - (d as any)) / 1000;\n\n  if (diff < 30) {\n    return \"刚刚\";\n  } else if (diff < 3600) {\n    return Math.ceil(diff / 60) + \"分钟前\";\n  } else if (diff < 3600 * 24) {\n    return Math.ceil(diff / 3600) + \"小时前\";\n  } else if (diff < 3600 * 24 * 2) {\n    return \"1天前\";\n  }\n\n  return parseTime(time, option);\n}\n","// 全局事件车\n\nimport mitt, { Handler, EventType, Emitter, WildcardHandler } from \"mitt\";\n\nconst ENVENT_BUS_INSTANCES = new Map();\n\ntype CustomEmitter = Emitter & {\n  once<T = any>(type: EventType, handler: Handler<T>): void;\n  once(type: \"*\", handler: WildcardHandler): void;\n};\n\n/**\n * 生成事件车\n *\n * @returns\n */\nfunction makeOneBus() {\n  const bus: CustomEmitter = mitt() as CustomEmitter;\n\n  // 仅触发一次的事件\n  bus.once = (eventType: EventType, handler: Handler) => {\n    const listener = function (...args: unknown[]) {\n      if (handler) {\n        handler.apply(this, args as any);\n      }\n      bus.off(eventType, listener);\n    };\n    bus.on(eventType, listener);\n  };\n\n  return bus;\n}\n\n/**\n * 获取事件车实例\n *\n * @param instanceName\n * @returns\n */\nexport function getBus(instanceName: string): CustomEmitter {\n  if (!instanceName) {\n    throw new Error(`Event Bus Require One Instance Name`);\n  }\n\n  let ins = ENVENT_BUS_INSTANCES.get(instanceName);\n  if (ins) {\n    return ins;\n  }\n\n  ins = makeOneBus();\n  ENVENT_BUS_INSTANCES.set(instanceName, ins);\n\n  return ins;\n}\n\n/**\n * 销毁所有的事件车\n */\nexport function destoryAllBus() {\n  ENVENT_BUS_INSTANCES.clear();\n}\n","/**\n * IP地址\n */\nexport const REGEXP_IP =\n  /^((2[0-4]\\d|25[0-5]|[01]?\\d\\d?)\\.){3}(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)$/;\n\n/**\n * 字符串\n */\nexport const REGEXP_STRING = /^[a-zA-Z0-9-_:：（）\\(\\)\\u4e00-\\u9fa5]{1,30}$/;\n"],"names":["makeRandom","Math","random","Date","toString","replace","slice","camelCase","str","tmp","substr","$1","toUpperCase","upperFirst","trim","rgbToHex","color","values","split","r","parseInt","g","b","padStart","hexToRgba","alp","exec","a","rgbaToRgb","parseFloat","floor","rr","gg","bb","encode","base64","btoa","window","encodeURIComponent","decode","decodeURIComponent","atob","isObject","val","getObjectType","obj","Array","deepClone","type","res","Object","keys","forEach","key","item","push","getCookie","name","ca","document","cookie","i","len","length","c","charAt","substring","indexOf","throttle","fn","wait","that","timer","rest","setTimeout","call","debounce","clearTimeout","bind","lastItem","list","isArray","Set","from","Map","stringify","replacer","entries","spaces","JSON","asyncSequentializer","toPromise","x","Promise","resolve","results","reduce","lastPromise","currentPromise","then","shift","poll","validate","interval","resolver","reject","result","valid","findFirstLeafNode","arr","childKey","undefined","child","makeTree","data","config","id","pid","_id","_pid","map","_map","__id__","__pid__","set","pItem","Reflect","deleteProperty","getDeviceType","test","navigator","userAgent","parseURLParameters","url","match","v","s","on","element","event","handler","useCapture","addEventListener","off","removeEventListener","once","el","listener","args","apply","hasClass","cls","Error","classList","contains","className","addClass","curClass","classes","j","clsName","add","removeClass","remove","getStyle","styleName","style","defaultView","computed","getComputedStyle","e","setStyle","value","prop","removeStyle","isScroll","isVertical","determinedDirection","overflow","getScrollContainer","parent","documentElement","includes","parentNode","isInContainer","container","elRect","getBoundingClientRect","containerRect","top","right","innerWidth","bottom","innerHeight","left","getOffsetTop","offset","offsetTop","offsetParent","getOffsetTopDistance","containerEl","abs","getElementOffsetRoot","actualTop","actualLeft","offsetLeft","current","scroll","getTotalScrollOffsetRoot","height","width","triggerEvent","eventType","detail","dispatchEvent","CustomEvent","lookupParentNodeByClassName","pClassName","currentTarget","rootNode","parentElement","clickProxy","pEl","cb","itemClass","target","elementIsVisibleInViewport","partiallyVisible","isScrollBottom","clientHeight","scrollTop","scrollHeight","getViewport","compatMode","body","clientWidth","pNode","scrollLeft","copyToClipboard","createElement","setAttribute","position","appendChild","selection","getSelection","select","execCommand","removeChild","selected","rangeCount","getRangeAt","removeAllRanges","addRange","downFileByUrl","fileName","lastIndexOf","tempLink","display","href","decodeURI","download","click","convertRes2Blob","binary","filename","blob","Blob","msSaveBlob","blobURL","URL","createObjectURL","revokeObjectURL","toDate","time","parseTime","format","arguments","date","formatObj","y","getFullYear","m","getMonth","d","getDate","h","getHours","getMinutes","getSeconds","getDay","time_str","formatTime","option","now","diff","ceil","ENVENT_BUS_INSTANCES","makeOneBus","bus","mitt","getBus","instanceName","ins","get","destoryAllBus","clear","REGEXP_IP","REGEXP_STRING"],"mappings":"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"}