{"version":3,"file":"weblibext.cjs.js","sources":["../src/string.ts","../src/lib.ts","../src/dom.ts","../src/reg.ts","../src/time.ts","../src/event-bus.ts"],"sourcesContent":["import base64 from \"Base64\";\n\n/**\n * 随机字符串\n */\nexport function makeRandom() {\n  return (Math.random() / +new Date()).toString(36).replace(/\\d/g, \"\").slice(1);\n}\n\n/**\n * 字符串转小驼峰\n * @param {String} str --a-_b--- => aBC\n */\nexport function camelCase(str: string) {\n  if (!str) return \"\";\n\n  // 去除收尾的空格、横线、下划线\n  const tmp = str.replace(/^[_\\-\\s]*|[_\\-\\s]*$/g, \"\");\n  return tmp.replace(/[-_\\s]+(\\w)/g, (substr, $1) => $1.toUpperCase());\n}\n\n/**\n * 字符串首字母大写\n */\nexport function upperFirst(str: string) {\n  if (!str.trim()) return \"\";\n\n  return str.trim().replace(/^\\w/, ($1) => $1.toUpperCase());\n}\n\n/**\n * rgb转hex\n *\n * @param color\n * @returns\n */\nexport function rgbToHex(color: string) {\n  const values = color.replace(/(rgba?|[()]+|\\s+)/g, \"\").split(\",\");\n\n  const r = parseInt(values[0]) || 0;\n  const g = parseInt(values[1]) || 0;\n  const b = parseInt(values[2]) || 0;\n\n  return ((r << 16) + (g << 8) + b).toString(16).padStart(6, \"0\");\n}\n\n/**\n * hex转rgba\n * @param {String} color\n * @param {Float} alp\n */\nexport function hexToRgba(color: string, alp: number) {\n  const tmp = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(color);\n  if (!tmp) return \"\";\n\n  const r = parseInt(tmp[1], 16);\n  const g = parseInt(tmp[2], 16);\n  const b = parseInt(tmp[3], 16);\n  const a = alp;\n\n  return `rgba(${r},${g},${b},${a})`;\n}\n\n/**\n * rgba转rgb\n * @param {String} color\n */\nexport function rgbaToRgb(color: string) {\n  const values = color.replace(/(rgba?|[()]+|\\s+)/g, \"\").split(\",\");\n\n  const a = parseFloat(values[3]) || 1;\n  const r = Math.floor(a * parseInt(values[0]) + (1 - a) * 255);\n  const g = Math.floor(a * parseInt(values[1]) + (1 - a) * 255);\n  const b = Math.floor(a * parseInt(values[2]) + (1 - a) * 255);\n\n  const rr = \"0\" + r.toString(16).slice(-2);\n  const gg = \"0\" + g.toString(16).slice(-2);\n  const bb = \"0\" + b.toString(16).slice(-2);\n\n  return `#${rr}${gg}${bb}`;\n}\n\n/**\n * base64编码，兼容中文\n *\n * @param str\n * @returns\n */\nexport function encode(str: string) {\n  return base64.btoa(window.encodeURIComponent(str));\n}\n\n/**\n * base64解码，兼容中文\n *\n * @param str\n * @returns\n */\nexport function decode(str: string) {\n  return window.decodeURIComponent(base64.atob(str));\n}\n\n/**\n * 序列化，可以处理Set、Map、Function\n * @param obj\n * @param spaces\n * @returns\n */\nexport function stringify(obj: any, spaces = 0) {\n  return JSON.stringify(\n    obj,\n    (key: any, val: any) => {\n      if (typeof val === \"symbol\") {\n        return val.toString();\n      }\n      if (val instanceof Set) {\n        return Array.from(val);\n      }\n      if (val instanceof Map) {\n        return Array.from(val.entries());\n      }\n      if (typeof val === \"function\") {\n        return val.toString();\n      }\n      return val;\n    },\n    spaces\n  );\n}\n","import { PlainObject } from \"@type/index\";\n\n/**\n * URL参数解析\n * @param url\n * parseURLParameters(\"http://url.com/page?age=123&sname=ddd\"); // {age: \"123\", name: \"ddd\"}\n */\nexport function parseURLParameters(url: string) {\n  return (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce(\n    (a: PlainObject, v) => (\n      (a[v.slice(0, v.indexOf(\"=\"))] = v.slice(v.indexOf(\"=\") + 1)), a\n    ),\n    {}\n  );\n}\n\nexport const isObject = (val: any) => getObjectType(val);\n\n/**\n * 获取数据类型\n *\n * @param obj\n * @returns\n */\nexport function getObjectType(obj: any) {\n  return obj === null\n    ? \"null\"\n    : obj instanceof Array\n    ? \"array\"\n    : typeof obj !== \"object\"\n    ? typeof obj\n    : \"object\";\n}\n\n/**\n * 深拷贝\n *\n * @param obj\n * @returns\n */\nexport function deepClone(obj: any) {\n  const type = getObjectType(obj);\n  if (type === \"object\") {\n    const res: PlainObject = {};\n    Object.keys(obj).forEach((key) => {\n      res[key] = deepClone(obj[key]);\n    });\n    return res;\n  }\n\n  if (type === \"array\") {\n    const res: any[] = [];\n    obj.forEach((item: any) => {\n      res.push(deepClone(item));\n    });\n    return res;\n  }\n  return obj;\n}\n\n/**\n * 读cookie\n * @param key\n * @returns\n */\nexport function getCookie(key: string) {\n  const name = key + \"=\";\n  const ca = document.cookie.split(\";\");\n  for (let i = 0, len = ca.length; i < len; i++) {\n    let c = ca[i];\n    while (c.charAt(0) === \" \") {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) !== -1) {\n      return c.substring(name.length, c.length);\n    }\n  }\n\n  return \"\";\n}\n\n/**\n * 函数节流，一个周期内仅执行一次\n *\n * @param fn\n * @param wait\n */\nexport function throttle(fn: any, wait = 300, that?: any) {\n  let timer: any = null;\n\n  return function (...rest: any[]) {\n    if (typeof fn !== \"function\") return;\n    if (!timer) {\n      timer = setTimeout(() => {\n        timer = null;\n        fn.call(that, ...rest);\n      }, wait);\n    }\n  };\n}\n\n/**\n * 函数防抖\n * 连续触发N次，仅在最后一次执行\n *\n * @param fn\n * @param wait\n */\nexport function debounce(fn: any, wait = 300, that?: any) {\n  let timer: any = null;\n\n  return function (...rest: any[]) {\n    if (typeof fn !== \"function\") return;\n\n    clearTimeout(timer);\n    timer = setTimeout(fn.bind(that, ...rest), wait);\n  };\n}\n\n/**\n * 获取数组、集合、Map的最后一项\n * @param list\n */\nexport function lastItem(list: any[] | Set<any> | Map<any, any>) {\n  if (Array.isArray(list)) {\n    return list.slice(-1)[0];\n  }\n\n  if (list instanceof Set) {\n    return Array.from(list).slice(-1)[0];\n  }\n\n  if (list instanceof Map) {\n    return Array.from(list.values()).slice(-1)[0];\n  }\n}\n\n/**\n * 顺序执行Promise队列\n */\nexport const asyncSequentializer = (() => {\n  const toPromise = (x: any) => {\n    if (x instanceof Promise) {\n      return x;\n    }\n\n    if (typeof x === \"function\") {\n      // if function is not async this will turn its result into a promise\n      // if it is async this will await for the result\n      return (async () => await x())();\n    }\n\n    return Promise.resolve(x);\n  };\n\n  return (list: any[]) => {\n    const results: any[] = [];\n\n    return (\n      list\n        .reduce((lastPromise, currentPromise) => {\n          return lastPromise.then((res: any) => {\n            results.push(res); // collect the results\n            return toPromise(currentPromise);\n          });\n        }, toPromise(list.shift()))\n        // collect the final result and return the array of results as resolved promise\n        .then((res: any) => Promise.resolve([...results, res]))\n    );\n  };\n})();\n\n/**\n * 轮询，直到返回为true\n *\n * @param fn\n * @param validate\n * @param interval\n */\nexport async function poll(fn: Function, validate: Function, interval = 2500) {\n  const resolver = async (resolve: any, reject: any) => {\n    try {\n      const result = await fn();\n      const valid = validate(result);\n      if (valid === true) {\n        resolve(result);\n      } else if (valid === false) {\n        // https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout\n        // settimeout可以接受多个参数，多余的参数会传递到回掉函数中\n        setTimeout(resolver, interval, resolve, reject);\n      }\n    } catch (e) {\n      reject(e);\n    }\n  };\n  return new Promise(resolver);\n}\n\n/**\n * 找到树的第一个叶子节点\n */\nexport function findFirstLeafNode(arr: any[], childKey = \"child\") {\n  if (!Array.isArray(arr) || arr.length === 0) return undefined;\n\n  let child = [...arr];\n  let obj = child.shift();\n  while (Array.isArray(obj[childKey]) && obj[childKey].length > 0) {\n    child = [...obj[childKey]];\n    obj = child.shift();\n  }\n\n  return obj;\n}\n\n/**\n * 生成一颗树\n *\n * @param data\n * @param config\n * @returns\n */\nexport function makeTree(\n  data: PlainObject[],\n  config = { id: \"id\", pid: \"pid\" }\n) {\n  if (!Array.isArray(data)) {\n    return [];\n  }\n\n  const { id: _id, pid: _pid } = config;\n  const map = data.reduce((_map, item) => {\n    item.__id__ = item[_id];\n    item.__pid__ = item[_pid];\n    item.child = [];\n    _map[item.__id__] = item;\n    return _map;\n  }, {});\n\n  const set = new Set(Object.keys(map));\n  Object.keys(map).forEach((key) => {\n    const item = map[key];\n    const pid = item.__pid__;\n    const pItem = map[pid];\n    if (!pItem) return;\n    pItem.child.push(item);\n    set.delete(item.__id__);\n    Reflect.deleteProperty(item, \"__id__\");\n    Reflect.deleteProperty(item, \"__pid__\");\n  });\n\n  return Array.from(set.values()).map((id) => {\n    const item = { ...map[id] };\n    item[_id] = item.__id__;\n    item[_pid] = item.__pid__;\n    Reflect.deleteProperty(item, \"__id__\");\n    Reflect.deleteProperty(item, \"__pid__\");\n    return item;\n  });\n}\n\n/**\n * 通过a标签下载文件\n * @param url\n * @returns\n */\nexport function downFileByUrl(url: string) {\n  if (!url) return;\n\n  const fileName = url.slice(url.lastIndexOf(\"/\") + 1, url.length);\n\n  const tempLink = document.createElement(\"a\");\n  tempLink.style.display = \"none\";\n  tempLink.href = url;\n  tempLink.setAttribute(\"download\", decodeURI(fileName)); // 兼容：某些浏览器不支持HTML5的download属性\n\n  if (typeof tempLink.download === \"undefined\") {\n    tempLink.setAttribute(\"target\", \"_blank\");\n  }\n\n  document.body.appendChild(tempLink);\n  tempLink.click();\n  document.body.removeChild(tempLink);\n}\n\n/**\n * 将Blob数据以文件形式下载\n * @param binary 待转换的二进制数据\n * @param filename 待下载的文件名 res.headers['content-disposition'].match(/filename=(.*)/)[1];\n * @param type MIME 类型 res.headers['content-type']\n */\nexport function downFileByBlob(\n  binary: any,\n  filename = \"unknown\",\n  type = \"application/octet-stream\"\n) {\n  // 将二进制流转为blob\n  const blob = new Blob([binary], { type });\n  if (typeof window.navigator.msSaveBlob !== \"undefined\") {\n    // 兼容IE，window.navigator.msSaveBlob：以本地方式保存文件\n    window.navigator.msSaveBlob(blob, decodeURI(filename));\n  } else {\n    // 创建新的URL并指向File对象或者Blob对象的地址\n    const blobURL = window.URL.createObjectURL(blob);\n\n    const tempLink = document.createElement(\"a\");\n    tempLink.style.display = \"none\";\n    tempLink.href = blobURL;\n    tempLink.setAttribute(\"download\", decodeURI(filename)); // 兼容：某些浏览器不支持HTML5的download属性\n\n    if (typeof tempLink.download === \"undefined\") {\n      tempLink.setAttribute(\"target\", \"_blank\");\n    }\n\n    document.body.appendChild(tempLink);\n    tempLink.click();\n    document.body.removeChild(tempLink);\n    window.URL.revokeObjectURL(blobURL);\n  }\n}\n\n/**\n * 将字符串拷贝到粘贴板\n * @param str\n * @returns\n */\nexport function copyToClipboard(str: string) {\n  const el = document.createElement(\"textarea\");\n  el.value = str;\n  el.setAttribute(\"readonly\", \"readonly\");\n  el.style.position = \"absolute\";\n  el.style.left = \"-9999px\";\n  document.body.appendChild(el);\n\n  const selection = window.getSelection();\n\n  el.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(el);\n\n  if (!selection) return;\n\n  const selected = selection.rangeCount > 0 ? selection.getRangeAt(0) : false;\n  if (selected) {\n    selection.removeAllRanges();\n    selection.addRange(selected);\n  }\n}\n","import { PlainObject } from \"@type/index\";\nimport { camelCase } from \"./string\";\nimport { isObject } from \"./lib\";\n\n/**\n * 设备类型获取\n */\nexport function getDeviceType() {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n    navigator.userAgent\n  )\n    ? \"Mobile\"\n    : \"Desktop\";\n}\n\nconst trim = function (s: string) {\n  return (s || \"\").replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, \"\");\n};\n\n/**\n * 注册事件\n *\n * @param element\n * @param event\n * @param handler\n * @param useCapture\n */\nexport const on = function (\n  element: HTMLElement | Document | Window,\n  event: string,\n  handler: EventListenerOrEventListenerObject,\n  useCapture = false\n): void {\n  if (element && event && handler) {\n    element.addEventListener(event, handler, useCapture);\n  }\n};\n\n/**\n * 移除事件\n *\n * @param element\n * @param event\n * @param handler\n * @param useCapture\n */\nexport const off = function (\n  element: HTMLElement | Document | Window,\n  event: string,\n  handler: EventListenerOrEventListenerObject,\n  useCapture = false\n): void {\n  if (element && event && handler) {\n    element.removeEventListener(event, handler, useCapture);\n  }\n};\n\n/**\n * 仅触发一次的事件\n *\n * @param el\n * @param event\n * @param fn\n */\nexport const once = function (\n  el: HTMLElement,\n  event: string,\n  fn: EventListener\n): void {\n  const listener = function (...args: unknown[]) {\n    if (fn) {\n      fn.apply(this, args as any);\n    }\n    off(el, event, listener);\n  };\n  on(el, event, listener);\n};\n\n/**\n * 判断元素是否具有某个class\n *\n * @param el\n * @param cls\n * @returns\n */\nexport function hasClass(el: HTMLElement, cls: string): boolean {\n  if (!el || !cls) return false;\n  if (cls.indexOf(\" \") !== -1)\n    throw new Error(\"className should not contain space.\");\n  if (el.classList) {\n    return el.classList.contains(cls);\n  } else {\n    return (\" \" + el.className + \" \").indexOf(\" \" + cls + \" \") > -1;\n  }\n}\n\n/**\n * 给元素添加多个class\n *\n * @param el\n * @param cls \"abc efg\"\n * @returns\n */\nexport function addClass(el: HTMLElement, cls: string): void {\n  if (!el) return;\n  let curClass = el.className;\n  const classes = (cls || \"\").split(\" \");\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.add(clsName);\n    } else if (!hasClass(el, clsName)) {\n      curClass += \" \" + clsName;\n    }\n  }\n  if (!el.classList) {\n    el.className = curClass;\n  }\n}\n\n/**\n * 移除多个class\n *\n * @param el\n * @param cls \"abc efg\"\n * @returns\n */\nexport function removeClass(el: HTMLElement, cls: string): void {\n  if (!el || !cls) return;\n  const classes = cls.split(\" \");\n  let curClass = \" \" + el.className + \" \";\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.remove(clsName);\n    } else if (hasClass(el, clsName)) {\n      curClass = curClass.replace(\" \" + clsName + \" \", \" \");\n    }\n  }\n  if (!el.classList) {\n    el.className = trim(curClass);\n  }\n}\n\n/**\n * 获取元素的某个样式\n *\n * @param element\n * @param styleName\n * @returns\n */\nexport const getStyle = function (\n  element: HTMLElement,\n  styleName: string\n): string | null {\n  styleName = camelCase(styleName);\n  if (styleName === \"float\") {\n    styleName = \"cssFloat\";\n  }\n  try {\n    const style = (element.style as PlainObject)[styleName];\n    if (style) return style;\n\n    if (!document || !document.defaultView) return \"\";\n\n    const computed = document.defaultView.getComputedStyle(element, \"\");\n    return computed ? (computed as PlainObject)[styleName] : \"\";\n  } catch (e) {\n    return (element.style as PlainObject)[styleName];\n  }\n};\n\n/**\n * 修改元素样式\n *\n * @param element\n * @param styleName\n * @param value\n * @returns\n */\nexport function setStyle(\n  element: HTMLElement,\n  styleName: CSSStyleDeclaration | string,\n  value?: string\n): void {\n  if (!element || !styleName) return;\n\n  if (isObject(styleName)) {\n    Object.keys(styleName).forEach((prop) => {\n      setStyle(element, prop, (styleName as PlainObject)[prop]);\n    });\n  } else {\n    styleName = camelCase(styleName as string);\n    (element.style as PlainObject)[styleName as string] = value;\n  }\n}\n\n/**\n * 移除元素样式\n *\n * @param element\n * @param style\n * @returns\n */\nexport function removeStyle(\n  element: HTMLElement,\n  style: CSSStyleDeclaration | string\n) {\n  if (!element || !style) return;\n\n  if (isObject(style)) {\n    Object.keys(style).forEach((prop) => {\n      setStyle(element, prop, \"\");\n    });\n  } else {\n    setStyle(element, style, \"\");\n  }\n}\n\n/**\n * 是否允许滚动\n *\n * @param el\n * @param isVertical\n * @returns\n */\nexport const isScroll = (el: HTMLElement, isVertical?: boolean): boolean => {\n  const determinedDirection = isVertical === null || isVertical === undefined;\n  const overflow = determinedDirection\n    ? getStyle(el, \"overflow\")\n    : isVertical\n    ? getStyle(el, \"overflow-y\")\n    : getStyle(el, \"overflow-x\");\n\n  if (!overflow) return false;\n\n  let len = overflow.match(/(scroll|auto)/)?.length;\n  if (!len) return false;\n  return true;\n};\n\n/**\n * 获取元素的滚动盒子\n *\n * @param el\n * @param isVertical\n * @returns\n */\nexport const getScrollContainer = (\n  el: HTMLElement,\n  isVertical?: boolean\n): Window | HTMLElement => {\n  let parent: HTMLElement = el;\n  while (parent) {\n    if ([window, document, document.documentElement].includes(parent)) {\n      return window;\n    }\n    if (isScroll(parent, isVertical)) {\n      return parent;\n    }\n    parent = parent.parentNode as HTMLElement;\n  }\n  return parent;\n};\n\n/**\n * 指定元素是否在另一元素包裹中\n *\n * @param el\n * @param container\n * @returns\n */\nexport const isInContainer = (\n  el: HTMLElement,\n  container: HTMLElement\n): boolean => {\n  if (!el || !container) return false;\n\n  const elRect = el.getBoundingClientRect();\n  let containerRect: PlainObject;\n\n  if (\n    [window, document, document.documentElement, null, undefined].includes(\n      container\n    )\n  ) {\n    containerRect = {\n      top: 0,\n      right: window.innerWidth,\n      bottom: window.innerHeight,\n      left: 0,\n    };\n  } else {\n    containerRect = container.getBoundingClientRect();\n  }\n\n  return (\n    elRect.top < containerRect.bottom &&\n    elRect.bottom > containerRect.top &&\n    elRect.right > containerRect.left &&\n    elRect.left < containerRect.right\n  );\n};\n\n/**\n * 元素距离文档顶部的位置\n *\n * @param el\n * @returns\n */\nexport const getOffsetTop = (el: HTMLElement) => {\n  let offset = 0;\n  let parent = el;\n\n  while (parent) {\n    offset += parent.offsetTop;\n    parent = parent.offsetParent as HTMLElement;\n  }\n\n  return offset;\n};\n\n/**\n * 两元素顶部位置差\n *\n * @param el\n * @param containerEl\n * @returns\n */\nexport const getOffsetTopDistance = (\n  el: HTMLElement,\n  containerEl: HTMLElement\n) => {\n  return Math.abs(getOffsetTop(el) - getOffsetTop(containerEl));\n};\n\n/**\n * 节点在浏览器窗口中的位置\n * @param{domNode} element 起始节点\n */\nexport function getElementOffsetRoot(element: any) {\n  if (!element) return { left: 0, top: 0 };\n\n  let actualTop = element.offsetTop;\n  let actualLeft = element.offsetLeft;\n  let current = element.offsetParent;\n\n  while (current !== null) {\n    actualTop += current.offsetTop;\n    actualLeft += current.offsetLeft;\n\n    current = current.offsetParent;\n  }\n\n  const scroll = getTotalScrollOffsetRoot(element);\n  return {\n    top: actualTop - scroll.height,\n    left: actualLeft - scroll.width,\n  };\n}\n\n/**\n * 在执行元素上触发指定的事件，且可传递自定义事件\n *\n * @param el\n * @param eventType\n * @param detail\n *\n * eg：triggerEvent(document.getElementById('id'), 'click', {name: '123'})\n */\nexport function triggerEvent(\n  el: HTMLElement,\n  eventType: string,\n  detail: PlainObject\n) {\n  el.dispatchEvent(new CustomEvent(eventType, { detail }));\n}\n\n/**\n * 查找指定具备ClassName的父节点\n * @param pClassName\n * @param currentTarget\n * @param rootNode\n * @returns\n */\nexport function lookupParentNodeByClassName(\n  pClassName: string,\n  currentTarget: HTMLElement,\n  rootNode: HTMLElement\n) {\n  if (currentTarget === rootNode) {\n    return null;\n  }\n\n  if (rootNode && !rootNode.contains(currentTarget)) {\n    return null;\n  }\n\n  let tmp: HTMLElement | null = currentTarget;\n  while (tmp !== null && tmp !== rootNode) {\n    const classList = tmp.classList;\n    if (classList.contains(pClassName)) {\n      return tmp;\n    }\n\n    tmp = tmp.parentElement;\n  }\n\n  return null;\n}\n\n/**\n * DOM事件代理\n *\n * @param pEl\n * @param cb\n * @param itemClass\n */\nexport function clickProxy(\n  pEl: HTMLElement,\n  cb: (target: HTMLElement) => void,\n  itemClass = \"item\"\n) {\n  on(pEl, \"click\", (event) => {\n    const target = lookupParentNodeByClassName(\n      itemClass,\n      event.target as HTMLElement,\n      pEl\n    );\n    if (!target) return;\n\n    cb(target);\n  });\n}\n\n/**\n * 判断指定元素是否在可视窗口中\n *\n * @param el\n * @param partiallyVisible true为完全可见；false为完全可见\n */\nexport function elementIsVisibleInViewport(\n  el: HTMLElement,\n  partiallyVisible = false\n) {\n  const { top, left, bottom, right } = el.getBoundingClientRect();\n  const { innerHeight, innerWidth } = window;\n  return partiallyVisible\n    ? ((top > 0 && top < innerHeight) ||\n        (bottom > 0 && bottom < innerHeight)) &&\n        ((left > 0 && left < innerWidth) || (right > 0 && right < innerWidth))\n    : top >= 0 && left >= 0 && bottom <= innerHeight && right <= innerWidth;\n}\n\n/**\n * 是否滚动到底部\n *\n * @param target\n * @returns\n */\nexport function isScrollBottom(target: HTMLElement) {\n  const clientHeight = target.clientHeight;\n  const scrollTop = target.scrollTop;\n  const scrollHeight = target.scrollHeight;\n\n  if (scrollHeight - scrollTop === clientHeight) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * 获取浏览器窗口的大小\n */\nexport function getViewport() {\n  if (document.compatMode === \"BackCompat\") {\n    return {\n      width: document.body.clientWidth,\n      height: document.body.clientHeight,\n    };\n  } else {\n    return {\n      width: document.documentElement.clientWidth,\n      height: document.documentElement.clientHeight,\n    };\n  }\n}\n\n/**\n * 相对于根节点的所有滚动总和\n * @param{domNode} element 起始节点\n */\nexport function getTotalScrollOffsetRoot(element: any) {\n  let width = 0,\n    height = 0;\n\n  let pNode = element.parentNode;\n  while (pNode !== null && pNode !== document) {\n    width += pNode.scrollLeft;\n    height += pNode.scrollTop;\n\n    pNode = pNode.parentNode;\n  }\n\n  return { width: width, height: height };\n}\n","/**\n * IP地址\n */\nexport const REGEXP_IP =\n  /^((2[0-4]\\d|25[0-5]|[01]?\\d\\d?)\\.){3}(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)$/;\n\n/**\n * 字符串\n */\nexport const REGEXP_STRING = /^[a-zA-Z0-9-_:：（）\\(\\)\\u4e00-\\u9fa5]{1,30}$/;\n","/**\n * 将时间统一转化为Date标准格式\n *\n * @param time\n * @returns\n */\nfunction toDate(time: Date | string | number): Date {\n  if (typeof time === \"object\") {\n    return time;\n  }\n\n  if (typeof time === \"string\") {\n    if (/^[0-9]+$/.test(time)) {\n      time = parseInt(time);\n    } else {\n      // 将ISO Date格式修改为GMT的时间格式\n      // 2021-02-26T04:02:57:677Z\n      // 2021-02-26T04:02:57.677Z\n      time = time.replace(/:(.{3}z)$/gi, (str, $1) => {\n        return `.${$1}`;\n      });\n    }\n  }\n\n  if (typeof time === \"number\" && time.toString().length === 10) {\n    time = time * 1000;\n  }\n\n  return new Date(time as number);\n}\n\n/**\n * 解析时间\n *\n * @param time\n * @param format\n * @returns\n */\nexport function parseTime(\n  time: Date | string | number,\n  format = \"{y}-{m}-{d} {h}:{i}:{s}\"\n): string | null {\n  if (arguments.length === 0 || !time) {\n    return null;\n  }\n\n  const date: Date = toDate(time);\n\n  const formatObj = {\n    y: date.getFullYear(),\n    m: date.getMonth() + 1,\n    d: date.getDate(),\n    h: date.getHours(),\n    i: date.getMinutes(),\n    s: date.getSeconds(),\n    a: date.getDay(),\n  };\n  const time_str = format.replace(/{([ymdhisa])+}/g, (result, key) => {\n    const value = (formatObj as any)[key];\n    if (key === \"a\") {\n      return [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"][value];\n    }\n    return value.toString().padStart(2, \"0\");\n  });\n  return time_str;\n}\n\n/**\n * 将时间格式化\n *\n * @param time\n * @param option\n * @returns\n */\nexport function formatTime(time: Date | string | number, option?: string) {\n  const d = toDate(time);\n  const now = Date.now();\n  const diff = (now - (d as any)) / 1000;\n\n  if (diff < 30) {\n    return \"刚刚\";\n  } else if (diff < 3600) {\n    return Math.ceil(diff / 60) + \"分钟前\";\n  } else if (diff < 3600 * 24) {\n    return Math.ceil(diff / 3600) + \"小时前\";\n  } else if (diff < 3600 * 24 * 2) {\n    return \"1天前\";\n  }\n\n  return parseTime(time, option);\n}\n","// 全局事件车\n\nimport mitt, { Handler, EventType, Emitter, WildcardHandler } from \"mitt\";\n\nconst ENVENT_BUS_INSTANCES = new Map();\n\ntype CustomEmitter = Emitter & {\n  once<T = any>(type: EventType, handler: Handler<T>): void;\n  once(type: \"*\", handler: WildcardHandler): void;\n};\n\n/**\n * 生成事件车\n *\n * @returns\n */\nfunction makeOneBus() {\n  const bus: CustomEmitter = mitt() as CustomEmitter;\n\n  // 仅触发一次的事件\n  bus.once = (eventType: EventType, handler: Handler) => {\n    const listener = function (...args: unknown[]) {\n      if (handler) {\n        handler.apply(this, args as any);\n      }\n      bus.off(eventType, listener);\n    };\n    bus.on(eventType, listener);\n  };\n\n  return bus;\n}\n\n/**\n * 获取事件车实例\n *\n * @param instanceName\n * @returns\n */\nexport function getBus(instanceName: string): CustomEmitter {\n  if (!instanceName) {\n    throw new Error(`Event Bus Require One Instance Name`);\n  }\n\n  let ins = ENVENT_BUS_INSTANCES.get(instanceName);\n  if (ins) {\n    return ins;\n  }\n\n  ins = makeOneBus();\n  ENVENT_BUS_INSTANCES.set(instanceName, ins);\n\n  return ins;\n}\n\n/**\n * 销毁所有的事件车\n */\nexport function destoryAllBus() {\n  ENVENT_BUS_INSTANCES.clear();\n}\n"],"names":["makeRandom","Math","random","Date","toString","replace","slice","camelCase","str","tmp","substr","$1","toUpperCase","upperFirst","trim","rgbToHex","color","values","split","r","parseInt","g","b","padStart","hexToRgba","alp","exec","a","rgbaToRgb","parseFloat","floor","rr","gg","bb","encode","base64","btoa","window","encodeURIComponent","decode","decodeURIComponent","atob","stringify","obj","spaces","JSON","key","val","Set","Array","from","Map","entries","parseURLParameters","url","match","reduce","v","indexOf","isObject","getObjectType","deepClone","type","res","Object","keys","forEach","item","push","getCookie","name","ca","document","cookie","i","len","length","c","charAt","substring","throttle","fn","wait","that","timer","rest","setTimeout","call","debounce","clearTimeout","bind","lastItem","list","isArray","asyncSequentializer","toPromise","x","Promise","resolve","results","lastPromise","currentPromise","then","shift","poll","validate","interval","resolver","reject","result","valid","findFirstLeafNode","arr","childKey","undefined","child","makeTree","data","config","id","pid","_id","_pid","map","_map","__id__","__pid__","set","pItem","Reflect","deleteProperty","downFileByUrl","fileName","lastIndexOf","tempLink","createElement","style","display","href","setAttribute","decodeURI","download","body","appendChild","click","removeChild","downFileByBlob","binary","filename","blob","Blob","navigator","msSaveBlob","blobURL","URL","createObjectURL","revokeObjectURL","copyToClipboard","el","value","position","left","selection","getSelection","select","execCommand","selected","rangeCount","getRangeAt","removeAllRanges","addRange","getDeviceType","test","userAgent","s","on","element","event","handler","useCapture","addEventListener","off","removeEventListener","once","listener","args","apply","hasClass","cls","Error","classList","contains","className","addClass","curClass","classes","j","clsName","add","removeClass","remove","getStyle","styleName","defaultView","computed","getComputedStyle","e","setStyle","prop","removeStyle","isScroll","isVertical","determinedDirection","overflow","getScrollContainer","parent","documentElement","includes","parentNode","isInContainer","container","elRect","getBoundingClientRect","containerRect","top","right","innerWidth","bottom","innerHeight","getOffsetTop","offset","offsetTop","offsetParent","getOffsetTopDistance","containerEl","abs","getElementOffsetRoot","actualTop","actualLeft","offsetLeft","current","scroll","getTotalScrollOffsetRoot","height","width","triggerEvent","eventType","detail","dispatchEvent","CustomEvent","lookupParentNodeByClassName","pClassName","currentTarget","rootNode","parentElement","clickProxy","pEl","cb","itemClass","target","elementIsVisibleInViewport","partiallyVisible","isScrollBottom","clientHeight","scrollTop","scrollHeight","getViewport","compatMode","clientWidth","pNode","scrollLeft","REGEXP_IP","REGEXP_STRING","toDate","time","parseTime","format","arguments","date","formatObj","y","getFullYear","m","getMonth","d","getDate","h","getHours","getMinutes","getSeconds","getDay","time_str","formatTime","option","now","diff","ceil","ENVENT_BUS_INSTANCES","makeOneBus","bus","mitt","getBus","instanceName","ins","get","destoryAllBus","clear"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;SAGgBA;AACd,SAAO,CAACC,IAAI,CAACC,MAAL,KAAgB,CAAC,IAAIC,IAAJ,EAAlB,EAA8BC,QAA9B,CAAuC,EAAvC,EAA2CC,OAA3C,CAAmD,KAAnD,EAA0D,EAA1D,EAA8DC,KAA9D,CAAoE,CAApE,CAAP;AACD;AAED;;;;;SAIgBC,UAAUC;AACxB,MAAI,CAACA,GAAL,EAAU,OAAO,EAAP;;AAGV,MAAMC,GAAG,GAAGD,GAAG,CAACH,OAAJ,CAAY,sBAAZ,EAAoC,EAApC,CAAZ;AACA,SAAOI,GAAG,CAACJ,OAAJ,CAAY,cAAZ,EAA4B,UAACK,MAAD,EAASC,EAAT;AAAA,WAAgBA,EAAE,CAACC,WAAH,EAAhB;AAAA,GAA5B,CAAP;AACD;AAED;;;;SAGgBC,WAAWL;AACzB,MAAI,CAACA,GAAG,CAACM,IAAJ,EAAL,EAAiB,OAAO,EAAP;AAEjB,SAAON,GAAG,CAACM,IAAJ,GAAWT,OAAX,CAAmB,KAAnB,EAA0B,UAACM,EAAD;AAAA,WAAQA,EAAE,CAACC,WAAH,EAAR;AAAA,GAA1B,CAAP;AACD;AAED;;;;;;;SAMgBG,SAASC;AACvB,MAAMC,MAAM,GAAGD,KAAK,CAACX,OAAN,CAAc,oBAAd,EAAoC,EAApC,EAAwCa,KAAxC,CAA8C,GAA9C,CAAf;AAEA,MAAMC,CAAC,GAAGC,QAAQ,CAACH,MAAM,CAAC,CAAD,CAAP,CAAR,IAAuB,CAAjC;AACA,MAAMI,CAAC,GAAGD,QAAQ,CAACH,MAAM,CAAC,CAAD,CAAP,CAAR,IAAuB,CAAjC;AACA,MAAMK,CAAC,GAAGF,QAAQ,CAACH,MAAM,CAAC,CAAD,CAAP,CAAR,IAAuB,CAAjC;AAEA,SAAO,CAAC,CAACE,CAAC,IAAI,EAAN,KAAaE,CAAC,IAAI,CAAlB,IAAuBC,CAAxB,EAA2BlB,QAA3B,CAAoC,EAApC,EAAwCmB,QAAxC,CAAiD,CAAjD,EAAoD,GAApD,CAAP;AACD;AAED;;;;;;SAKgBC,UAAUR,OAAeS;AACvC,MAAMhB,GAAG,GAAG,4CAA4CiB,IAA5C,CAAiDV,KAAjD,CAAZ;AACA,MAAI,CAACP,GAAL,EAAU,OAAO,EAAP;AAEV,MAAMU,CAAC,GAAGC,QAAQ,CAACX,GAAG,CAAC,CAAD,CAAJ,EAAS,EAAT,CAAlB;AACA,MAAMY,CAAC,GAAGD,QAAQ,CAACX,GAAG,CAAC,CAAD,CAAJ,EAAS,EAAT,CAAlB;AACA,MAAMa,CAAC,GAAGF,QAAQ,CAACX,GAAG,CAAC,CAAD,CAAJ,EAAS,EAAT,CAAlB;AACA,MAAMkB,CAAC,GAAGF,GAAV;AAEA,wBAAeN,CAAf,cAAoBE,CAApB,cAAyBC,CAAzB,cAA8BK,CAA9B;AACD;AAED;;;;;SAIgBC,UAAUZ;AACxB,MAAMC,MAAM,GAAGD,KAAK,CAACX,OAAN,CAAc,oBAAd,EAAoC,EAApC,EAAwCa,KAAxC,CAA8C,GAA9C,CAAf;AAEA,MAAMS,CAAC,GAAGE,UAAU,CAACZ,MAAM,CAAC,CAAD,CAAP,CAAV,IAAyB,CAAnC;AACA,MAAME,CAAC,GAAGlB,IAAI,CAAC6B,KAAL,CAAWH,CAAC,GAAGP,QAAQ,CAACH,MAAM,CAAC,CAAD,CAAP,CAAZ,GAA0B,CAAC,IAAIU,CAAL,IAAU,GAA/C,CAAV;AACA,MAAMN,CAAC,GAAGpB,IAAI,CAAC6B,KAAL,CAAWH,CAAC,GAAGP,QAAQ,CAACH,MAAM,CAAC,CAAD,CAAP,CAAZ,GAA0B,CAAC,IAAIU,CAAL,IAAU,GAA/C,CAAV;AACA,MAAML,CAAC,GAAGrB,IAAI,CAAC6B,KAAL,CAAWH,CAAC,GAAGP,QAAQ,CAACH,MAAM,CAAC,CAAD,CAAP,CAAZ,GAA0B,CAAC,IAAIU,CAAL,IAAU,GAA/C,CAAV;AAEA,MAAMI,EAAE,GAAG,MAAMZ,CAAC,CAACf,QAAF,CAAW,EAAX,EAAeE,KAAf,CAAqB,CAAC,CAAtB,CAAjB;AACA,MAAM0B,EAAE,GAAG,MAAMX,CAAC,CAACjB,QAAF,CAAW,EAAX,EAAeE,KAAf,CAAqB,CAAC,CAAtB,CAAjB;AACA,MAAM2B,EAAE,GAAG,MAAMX,CAAC,CAAClB,QAAF,CAAW,EAAX,EAAeE,KAAf,CAAqB,CAAC,CAAtB,CAAjB;AAEA,oBAAWyB,EAAX,SAAgBC,EAAhB,SAAqBC,EAArB;AACD;AAED;;;;;;;SAMgBC,OAAO1B;AACrB,SAAO2B,0BAAM,CAACC,IAAP,CAAYC,MAAM,CAACC,kBAAP,CAA0B9B,GAA1B,CAAZ,CAAP;AACD;AAED;;;;;;;SAMgB+B,OAAO/B;AACrB,SAAO6B,MAAM,CAACG,kBAAP,CAA0BL,0BAAM,CAACM,IAAP,CAAYjC,GAAZ,CAA1B,CAAP;AACD;AAED;;;;;;;SAMgBkC,UAAUC;MAAUC,6EAAS;AAC3C,SAAOC,IAAI,CAACH,SAAL,CACLC,GADK,EAEL,UAACG,GAAD,EAAWC,GAAX;AACE,QAAI,QAAOA,GAAP,MAAe,QAAnB,EAA6B;AAC3B,aAAOA,GAAG,CAAC3C,QAAJ,EAAP;AACD;;AACD,QAAI2C,GAAG,YAAYC,GAAnB,EAAwB;AACtB,aAAOC,KAAK,CAACC,IAAN,CAAWH,GAAX,CAAP;AACD;;AACD,QAAIA,GAAG,YAAYI,GAAnB,EAAwB;AACtB,aAAOF,KAAK,CAACC,IAAN,CAAWH,GAAG,CAACK,OAAJ,EAAX,CAAP;AACD;;AACD,QAAI,OAAOL,GAAP,KAAe,UAAnB,EAA+B;AAC7B,aAAOA,GAAG,CAAC3C,QAAJ,EAAP;AACD;;AACD,WAAO2C,GAAP;AACD,GAhBI,EAiBLH,MAjBK,CAAP;AAmBD;;;;;;;;;;;;;;;AC9HD;;;;;SAKgBS,mBAAmBC;AACjC,SAAO,CAACA,GAAG,CAACC,KAAJ,CAAU,sBAAV,KAAqC,EAAtC,EAA0CC,MAA1C,CACL,UAAC7B,CAAD,EAAiB8B,CAAjB;AAAA,WACG9B,CAAC,CAAC8B,CAAC,CAACnD,KAAF,CAAQ,CAAR,EAAWmD,CAAC,CAACC,OAAF,CAAU,GAAV,CAAX,CAAD,CAAD,GAAgCD,CAAC,CAACnD,KAAF,CAAQmD,CAAC,CAACC,OAAF,CAAU,GAAV,IAAiB,CAAzB,CAAjC,EAA+D/B,CADjE;AAAA,GADK,EAIL,EAJK,CAAP;AAMD;AAEM,IAAMgC,QAAQ,GAAG,SAAXA,QAAW,CAACZ,GAAD;AAAA,SAAca,aAAa,CAACb,GAAD,CAA3B;AAAA,CAAjB;AAEP;;;;;;;SAMgBa,cAAcjB;AAC5B,SAAOA,GAAG,KAAK,IAAR,GACH,MADG,GAEHA,GAAG,YAAYM,KAAf,GACA,OADA,GAEA,QAAON,GAAP,MAAe,QAAf,WACOA,GADP,IAEA,QANJ;AAOD;AAED;;;;;;;SAMgBkB,UAAUlB;AACxB,MAAMmB,IAAI,GAAGF,aAAa,CAACjB,GAAD,CAA1B;;AACA,MAAImB,IAAI,KAAK,QAAb,EAAuB;AACrB,QAAMC,GAAG,GAAgB,EAAzB;AACAC,IAAAA,MAAM,CAACC,IAAP,CAAYtB,GAAZ,EAAiBuB,OAAjB,CAAyB,UAACpB,GAAD;AACvBiB,MAAAA,GAAG,CAACjB,GAAD,CAAH,GAAWe,SAAS,CAAClB,GAAG,CAACG,GAAD,CAAJ,CAApB;AACD,KAFD;AAGA,WAAOiB,GAAP;AACD;;AAED,MAAID,IAAI,KAAK,OAAb,EAAsB;AACpB,QAAMC,IAAG,GAAU,EAAnB;AACApB,IAAAA,GAAG,CAACuB,OAAJ,CAAY,UAACC,IAAD;AACVJ,MAAAA,IAAG,CAACK,IAAJ,CAASP,SAAS,CAACM,IAAD,CAAlB;AACD,KAFD;AAGA,WAAOJ,IAAP;AACD;;AACD,SAAOpB,GAAP;AACD;AAED;;;;;;SAKgB0B,UAAUvB;AACxB,MAAMwB,IAAI,GAAGxB,GAAG,GAAG,GAAnB;AACA,MAAMyB,EAAE,GAAGC,QAAQ,CAACC,MAAT,CAAgBvD,KAAhB,CAAsB,GAAtB,CAAX;;AACA,OAAK,IAAIwD,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGJ,EAAE,CAACK,MAAzB,EAAiCF,CAAC,GAAGC,GAArC,EAA0CD,CAAC,EAA3C,EAA+C;AAC7C,QAAIG,CAAC,GAAGN,EAAE,CAACG,CAAD,CAAV;;AACA,WAAOG,CAAC,CAACC,MAAF,CAAS,CAAT,MAAgB,GAAvB,EAA4B;AAC1BD,MAAAA,CAAC,GAAGA,CAAC,CAACE,SAAF,CAAY,CAAZ,CAAJ;AACD;;AACD,QAAIF,CAAC,CAACnB,OAAF,CAAUY,IAAV,MAAoB,CAAC,CAAzB,EAA4B;AAC1B,aAAOO,CAAC,CAACE,SAAF,CAAYT,IAAI,CAACM,MAAjB,EAAyBC,CAAC,CAACD,MAA3B,CAAP;AACD;AACF;;AAED,SAAO,EAAP;AACD;AAED;;;;;;;SAMgBI,SAASC;MAASC,2EAAO;MAAKC;AAC5C,MAAIC,KAAK,GAAQ,IAAjB;AAEA,SAAO;sCAAaC;AAAAA,MAAAA;;;AAClB,QAAI,OAAOJ,EAAP,KAAc,UAAlB,EAA8B;;AAC9B,QAAI,CAACG,KAAL,EAAY;AACVA,MAAAA,KAAK,GAAGE,UAAU,CAAC;AACjBF,QAAAA,KAAK,GAAG,IAAR;AACAH,QAAAA,EAAE,CAACM,IAAH,OAAAN,EAAE,GAAME,IAAN,SAAeE,IAAf,EAAF;AACD,OAHiB,EAGfH,IAHe,CAAlB;AAID;AACF,GARD;AASD;AAED;;;;;;;;SAOgBM,SAASP;MAASC,2EAAO;MAAKC;AAC5C,MAAIC,KAAK,GAAQ,IAAjB;AAEA,SAAO;AACL,QAAI,OAAOH,EAAP,KAAc,UAAlB,EAA8B;AAE9BQ,IAAAA,YAAY,CAACL,KAAD,CAAZ;;uCAHkBC;AAAAA,MAAAA;;;AAIlBD,IAAAA,KAAK,GAAGE,UAAU,CAACL,EAAE,CAACS,IAAH,OAAAT,EAAE,GAAME,IAAN,SAAeE,IAAf,EAAH,EAAyBH,IAAzB,CAAlB;AACD,GALD;AAMD;AAED;;;;;SAIgBS,SAASC;AACvB,MAAI3C,KAAK,CAAC4C,OAAN,CAAcD,IAAd,CAAJ,EAAyB;AACvB,WAAOA,IAAI,CAACtF,KAAL,CAAW,CAAC,CAAZ,EAAe,CAAf,CAAP;AACD;;AAED,MAAIsF,IAAI,YAAY5C,GAApB,EAAyB;AACvB,WAAOC,KAAK,CAACC,IAAN,CAAW0C,IAAX,EAAiBtF,KAAjB,CAAuB,CAAC,CAAxB,EAA2B,CAA3B,CAAP;AACD;;AAED,MAAIsF,IAAI,YAAYzC,GAApB,EAAyB;AACvB,WAAOF,KAAK,CAACC,IAAN,CAAW0C,IAAI,CAAC3E,MAAL,EAAX,EAA0BX,KAA1B,CAAgC,CAAC,CAAjC,EAAoC,CAApC,CAAP;AACD;AACF;AAED;;;;AAGO,IAAMwF,mBAAmB,GAAI;AAClC,MAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,CAAD;AAChB,QAAIA,CAAC,YAAYC,OAAjB,EAA0B;AACxB,aAAOD,CAAP;AACD;;AAED,QAAI,OAAOA,CAAP,KAAa,UAAjB,EAA6B;AAC3B;AACA;AACA,aAAO,wDAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAkBA,CAAC,EAAnB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAD,IAAP;AACD;;AAED,WAAOC,OAAO,CAACC,OAAR,CAAgBF,CAAhB,CAAP;AACD,GAZD;;AAcA,SAAO,UAACJ,IAAD;AACL,QAAMO,OAAO,GAAU,EAAvB;AAEA,WACEP,IAAI,CACDpC,MADH,CACU,UAAC4C,WAAD,EAAcC,cAAd;AACN,aAAOD,WAAW,CAACE,IAAZ,CAAiB,UAACvC,GAAD;AACtBoC,QAAAA,OAAO,CAAC/B,IAAR,CAAaL,GAAb;;AACA,eAAOgC,SAAS,CAACM,cAAD,CAAhB;AACD,OAHM,CAAP;AAID,KANH,EAMKN,SAAS,CAACH,IAAI,CAACW,KAAL,EAAD,CANd;AAAA,KAQGD,IARH,CAQQ,UAACvC,GAAD;AAAA,aAAckC,OAAO,CAACC,OAAR,WAAoBC,OAApB,GAA6BpC,GAA7B,GAAd;AAAA,KARR,CADF;AAWD,GAdD;AAeD,CA9BkC,EAA5B;AAgCP;;;;;;;;SAOsByC,IAAtB;AAAA;AAAA;AAmBA;;;;;kEAnBO,kBAAoBvB,EAApB,EAAkCwB,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsDC,YAAAA,QAAtD,8DAAiE,IAAjE;;AACCC,YAAAA,QADD;AAAA,kFACY,kBAAOT,OAAP,EAAqBU,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAEQ3B,EAAE,EAFV;;AAAA;AAEP4B,wBAAAA,MAFO;AAGPC,wBAAAA,KAHO,GAGCL,QAAQ,CAACI,MAAD,CAHT;;AAIb,4BAAIC,KAAK,KAAK,IAAd,EAAoB;AAClBZ,0BAAAA,OAAO,CAACW,MAAD,CAAP;AACD,yBAFD,MAEO,IAAIC,KAAK,KAAK,KAAd,EAAqB;AAC1B;AACA;AACAxB,0BAAAA,UAAU,CAACqB,QAAD,EAAWD,QAAX,EAAqBR,OAArB,EAA8BU,MAA9B,CAAV;AACD;;AAVY;AAAA;;AAAA;AAAA;AAAA;AAYbA,wBAAAA,MAAM,cAAN;;AAZa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADZ;;AAAA,8BACCD,QADD;AAAA;AAAA;AAAA;;AAAA,8CAgBE,IAAIV,OAAJ,CAAYU,QAAZ,CAhBF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;SAsBSI,kBAAkBC;MAAYC,+EAAW;AACvD,MAAI,CAAChE,KAAK,CAAC4C,OAAN,CAAcmB,GAAd,CAAD,IAAuBA,GAAG,CAACpC,MAAJ,KAAe,CAA1C,EAA6C,OAAOsC,SAAP;;AAE7C,MAAIC,KAAK,sBAAOH,GAAP,CAAT;;AACA,MAAIrE,GAAG,GAAGwE,KAAK,CAACZ,KAAN,EAAV;;AACA,SAAOtD,KAAK,CAAC4C,OAAN,CAAclD,GAAG,CAACsE,QAAD,CAAjB,KAAgCtE,GAAG,CAACsE,QAAD,CAAH,CAAcrC,MAAd,GAAuB,CAA9D,EAAiE;AAC/DuC,IAAAA,KAAK,sBAAOxE,GAAG,CAACsE,QAAD,CAAV,CAAL;AACAtE,IAAAA,GAAG,GAAGwE,KAAK,CAACZ,KAAN,EAAN;AACD;;AAED,SAAO5D,GAAP;AACD;AAED;;;;;;;;SAOgByE,SACdC;MACAC,6EAAS;AAAEC,IAAAA,EAAE,EAAE,IAAN;AAAYC,IAAAA,GAAG,EAAE;AAAjB;;AAET,MAAI,CAACvE,KAAK,CAAC4C,OAAN,CAAcwB,IAAd,CAAL,EAA0B;AACxB,WAAO,EAAP;AACD;;AAED,MAAYI,GAAZ,GAA+BH,MAA/B,CAAQC,EAAR;AAAA,MAAsBG,IAAtB,GAA+BJ,MAA/B,CAAiBE,GAAjB;AACA,MAAMG,GAAG,GAAGN,IAAI,CAAC7D,MAAL,CAAY,UAACoE,IAAD,EAAOzD,IAAP;AACtBA,IAAAA,IAAI,CAAC0D,MAAL,GAAc1D,IAAI,CAACsD,GAAD,CAAlB;AACAtD,IAAAA,IAAI,CAAC2D,OAAL,GAAe3D,IAAI,CAACuD,IAAD,CAAnB;AACAvD,IAAAA,IAAI,CAACgD,KAAL,GAAa,EAAb;AACAS,IAAAA,IAAI,CAACzD,IAAI,CAAC0D,MAAN,CAAJ,GAAoB1D,IAApB;AACA,WAAOyD,IAAP;AACD,GANW,EAMT,EANS,CAAZ;AAQA,MAAMG,GAAG,GAAG,IAAI/E,GAAJ,CAAQgB,MAAM,CAACC,IAAP,CAAY0D,GAAZ,CAAR,CAAZ;AACA3D,EAAAA,MAAM,CAACC,IAAP,CAAY0D,GAAZ,EAAiBzD,OAAjB,CAAyB,UAACpB,GAAD;AACvB,QAAMqB,IAAI,GAAGwD,GAAG,CAAC7E,GAAD,CAAhB;AACA,QAAM0E,GAAG,GAAGrD,IAAI,CAAC2D,OAAjB;AACA,QAAME,KAAK,GAAGL,GAAG,CAACH,GAAD,CAAjB;AACA,QAAI,CAACQ,KAAL,EAAY;AACZA,IAAAA,KAAK,CAACb,KAAN,CAAY/C,IAAZ,CAAiBD,IAAjB;AACA4D,IAAAA,GAAG,UAAH,CAAW5D,IAAI,CAAC0D,MAAhB;AACAI,IAAAA,OAAO,CAACC,cAAR,CAAuB/D,IAAvB,EAA6B,QAA7B;AACA8D,IAAAA,OAAO,CAACC,cAAR,CAAuB/D,IAAvB,EAA6B,SAA7B;AACD,GATD;AAWA,SAAOlB,KAAK,CAACC,IAAN,CAAW6E,GAAG,CAAC9G,MAAJ,EAAX,EAAyB0G,GAAzB,CAA6B,UAACJ,EAAD;AAClC,QAAMpD,IAAI,sBAAQwD,GAAG,CAACJ,EAAD,CAAX,CAAV;;AACApD,IAAAA,IAAI,CAACsD,GAAD,CAAJ,GAAYtD,IAAI,CAAC0D,MAAjB;AACA1D,IAAAA,IAAI,CAACuD,IAAD,CAAJ,GAAavD,IAAI,CAAC2D,OAAlB;AACAG,IAAAA,OAAO,CAACC,cAAR,CAAuB/D,IAAvB,EAA6B,QAA7B;AACA8D,IAAAA,OAAO,CAACC,cAAR,CAAuB/D,IAAvB,EAA6B,SAA7B;AACA,WAAOA,IAAP;AACD,GAPM,CAAP;AAQD;AAED;;;;;;SAKgBgE,cAAc7E;AAC5B,MAAI,CAACA,GAAL,EAAU;AAEV,MAAM8E,QAAQ,GAAG9E,GAAG,CAAChD,KAAJ,CAAUgD,GAAG,CAAC+E,WAAJ,CAAgB,GAAhB,IAAuB,CAAjC,EAAoC/E,GAAG,CAACsB,MAAxC,CAAjB;AAEA,MAAM0D,QAAQ,GAAG9D,QAAQ,CAAC+D,aAAT,CAAuB,GAAvB,CAAjB;AACAD,EAAAA,QAAQ,CAACE,KAAT,CAAeC,OAAf,GAAyB,MAAzB;AACAH,EAAAA,QAAQ,CAACI,IAAT,GAAgBpF,GAAhB;AACAgF,EAAAA,QAAQ,CAACK,YAAT,CAAsB,UAAtB,EAAkCC,SAAS,CAACR,QAAD,CAA3C;;AAEA,MAAI,OAAOE,QAAQ,CAACO,QAAhB,KAA6B,WAAjC,EAA8C;AAC5CP,IAAAA,QAAQ,CAACK,YAAT,CAAsB,QAAtB,EAAgC,QAAhC;AACD;;AAEDnE,EAAAA,QAAQ,CAACsE,IAAT,CAAcC,WAAd,CAA0BT,QAA1B;AACAA,EAAAA,QAAQ,CAACU,KAAT;AACAxE,EAAAA,QAAQ,CAACsE,IAAT,CAAcG,WAAd,CAA0BX,QAA1B;AACD;AAED;;;;;;;SAMgBY,eACdC;MACAC,+EAAW;MACXtF,2EAAO;AAEP;AACA,MAAMuF,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACH,MAAD,CAAT,EAAmB;AAAErF,IAAAA,IAAI,EAAJA;AAAF,GAAnB,CAAb;;AACA,MAAI,OAAOzB,MAAM,CAACkH,SAAP,CAAiBC,UAAxB,KAAuC,WAA3C,EAAwD;AACtD;AACAnH,IAAAA,MAAM,CAACkH,SAAP,CAAiBC,UAAjB,CAA4BH,IAA5B,EAAkCT,SAAS,CAACQ,QAAD,CAA3C;AACD,GAHD,MAGO;AACL;AACA,QAAMK,OAAO,GAAGpH,MAAM,CAACqH,GAAP,CAAWC,eAAX,CAA2BN,IAA3B,CAAhB;AAEA,QAAMf,QAAQ,GAAG9D,QAAQ,CAAC+D,aAAT,CAAuB,GAAvB,CAAjB;AACAD,IAAAA,QAAQ,CAACE,KAAT,CAAeC,OAAf,GAAyB,MAAzB;AACAH,IAAAA,QAAQ,CAACI,IAAT,GAAgBe,OAAhB;AACAnB,IAAAA,QAAQ,CAACK,YAAT,CAAsB,UAAtB,EAAkCC,SAAS,CAACQ,QAAD,CAA3C,EAPK;;AASL,QAAI,OAAOd,QAAQ,CAACO,QAAhB,KAA6B,WAAjC,EAA8C;AAC5CP,MAAAA,QAAQ,CAACK,YAAT,CAAsB,QAAtB,EAAgC,QAAhC;AACD;;AAEDnE,IAAAA,QAAQ,CAACsE,IAAT,CAAcC,WAAd,CAA0BT,QAA1B;AACAA,IAAAA,QAAQ,CAACU,KAAT;AACAxE,IAAAA,QAAQ,CAACsE,IAAT,CAAcG,WAAd,CAA0BX,QAA1B;AACAjG,IAAAA,MAAM,CAACqH,GAAP,CAAWE,eAAX,CAA2BH,OAA3B;AACD;AACF;AAED;;;;;;SAKgBI,gBAAgBrJ;AAC9B,MAAMsJ,EAAE,GAAGtF,QAAQ,CAAC+D,aAAT,CAAuB,UAAvB,CAAX;AACAuB,EAAAA,EAAE,CAACC,KAAH,GAAWvJ,GAAX;AACAsJ,EAAAA,EAAE,CAACnB,YAAH,CAAgB,UAAhB,EAA4B,UAA5B;AACAmB,EAAAA,EAAE,CAACtB,KAAH,CAASwB,QAAT,GAAoB,UAApB;AACAF,EAAAA,EAAE,CAACtB,KAAH,CAASyB,IAAT,GAAgB,SAAhB;AACAzF,EAAAA,QAAQ,CAACsE,IAAT,CAAcC,WAAd,CAA0Be,EAA1B;AAEA,MAAMI,SAAS,GAAG7H,MAAM,CAAC8H,YAAP,EAAlB;AAEAL,EAAAA,EAAE,CAACM,MAAH;AACA5F,EAAAA,QAAQ,CAAC6F,WAAT,CAAqB,MAArB;AACA7F,EAAAA,QAAQ,CAACsE,IAAT,CAAcG,WAAd,CAA0Ba,EAA1B;AAEA,MAAI,CAACI,SAAL,EAAgB;AAEhB,MAAMI,QAAQ,GAAGJ,SAAS,CAACK,UAAV,GAAuB,CAAvB,GAA2BL,SAAS,CAACM,UAAV,CAAqB,CAArB,CAA3B,GAAqD,KAAtE;;AACA,MAAIF,QAAJ,EAAc;AACZJ,IAAAA,SAAS,CAACO,eAAV;AACAP,IAAAA,SAAS,CAACQ,QAAV,CAAmBJ,QAAnB;AACD;AACF;;;;;;;;;;;;;;;;;;;;;ACtVD;;;;SAGgBK;AACd,SAAO,iEAAiEC,IAAjE,CACLrB,SAAS,CAACsB,SADL,IAGH,QAHG,GAIH,SAJJ;AAKD;;AAED,IAAM/J,IAAI,GAAG,SAAPA,IAAO,CAAUgK,CAAV;AACX,SAAO,CAACA,CAAC,IAAI,EAAN,EAAUzK,OAAV,CAAkB,4BAAlB,EAAgD,EAAhD,CAAP;AACD,CAFD;AAIA;;;;;;;;;;AAQO,IAAM0K,EAAE,GAAG,SAALA,EAAK,CAChBC,OADgB,EAEhBC,KAFgB,EAGhBC,OAHgB;MAIhBC,iFAAa;;AAEb,MAAIH,OAAO,IAAIC,KAAX,IAAoBC,OAAxB,EAAiC;AAC/BF,IAAAA,OAAO,CAACI,gBAAR,CAAyBH,KAAzB,EAAgCC,OAAhC,EAAyCC,UAAzC;AACD;AACF,CATM;AAWP;;;;;;;;;AAQO,IAAME,GAAG,GAAG,SAANA,GAAM,CACjBL,OADiB,EAEjBC,KAFiB,EAGjBC,OAHiB;MAIjBC,iFAAa;;AAEb,MAAIH,OAAO,IAAIC,KAAX,IAAoBC,OAAxB,EAAiC;AAC/BF,IAAAA,OAAO,CAACM,mBAAR,CAA4BL,KAA5B,EAAmCC,OAAnC,EAA4CC,UAA5C;AACD;AACF,CATM;AAWP;;;;;;;;AAOO,IAAMI,IAAI,GAAG,SAAPA,IAAO,CAClBzB,EADkB,EAElBmB,KAFkB,EAGlBhG,EAHkB;AAKlB,MAAMuG,QAAQ,GAAG,SAAXA,QAAW;AACf,QAAIvG,EAAJ,EAAQ;AAAA,wCADoBwG,IACpB;AADoBA,QAAAA,IACpB;AAAA;;AACNxG,MAAAA,EAAE,CAACyG,KAAH,CAAS,IAAT,EAAeD,IAAf;AACD;;AACDJ,IAAAA,GAAG,CAACvB,EAAD,EAAKmB,KAAL,EAAYO,QAAZ,CAAH;AACD,GALD;;AAMAT,EAAAA,EAAE,CAACjB,EAAD,EAAKmB,KAAL,EAAYO,QAAZ,CAAF;AACD,CAZM;AAcP;;;;;;;;SAOgBG,SAAS7B,IAAiB8B;AACxC,MAAI,CAAC9B,EAAD,IAAO,CAAC8B,GAAZ,EAAiB,OAAO,KAAP;AACjB,MAAIA,GAAG,CAAClI,OAAJ,CAAY,GAAZ,MAAqB,CAAC,CAA1B,EACE,MAAM,IAAImI,KAAJ,CAAU,qCAAV,CAAN;;AACF,MAAI/B,EAAE,CAACgC,SAAP,EAAkB;AAChB,WAAOhC,EAAE,CAACgC,SAAH,CAAaC,QAAb,CAAsBH,GAAtB,CAAP;AACD,GAFD,MAEO;AACL,WAAO,CAAC,MAAM9B,EAAE,CAACkC,SAAT,GAAqB,GAAtB,EAA2BtI,OAA3B,CAAmC,MAAMkI,GAAN,GAAY,GAA/C,IAAsD,CAAC,CAA9D;AACD;AACF;AAED;;;;;;;;SAOgBK,SAASnC,IAAiB8B;AACxC,MAAI,CAAC9B,EAAL,EAAS;AACT,MAAIoC,QAAQ,GAAGpC,EAAE,CAACkC,SAAlB;AACA,MAAMG,OAAO,GAAG,CAACP,GAAG,IAAI,EAAR,EAAY1K,KAAZ,CAAkB,GAAlB,CAAhB;;AAEA,OAAK,IAAIwD,CAAC,GAAG,CAAR,EAAW0H,CAAC,GAAGD,OAAO,CAACvH,MAA5B,EAAoCF,CAAC,GAAG0H,CAAxC,EAA2C1H,CAAC,EAA5C,EAAgD;AAC9C,QAAM2H,OAAO,GAAGF,OAAO,CAACzH,CAAD,CAAvB;AACA,QAAI,CAAC2H,OAAL,EAAc;;AAEd,QAAIvC,EAAE,CAACgC,SAAP,EAAkB;AAChBhC,MAAAA,EAAE,CAACgC,SAAH,CAAaQ,GAAb,CAAiBD,OAAjB;AACD,KAFD,MAEO,IAAI,CAACV,QAAQ,CAAC7B,EAAD,EAAKuC,OAAL,CAAb,EAA4B;AACjCH,MAAAA,QAAQ,IAAI,MAAMG,OAAlB;AACD;AACF;;AACD,MAAI,CAACvC,EAAE,CAACgC,SAAR,EAAmB;AACjBhC,IAAAA,EAAE,CAACkC,SAAH,GAAeE,QAAf;AACD;AACF;AAED;;;;;;;;SAOgBK,YAAYzC,IAAiB8B;AAC3C,MAAI,CAAC9B,EAAD,IAAO,CAAC8B,GAAZ,EAAiB;AACjB,MAAMO,OAAO,GAAGP,GAAG,CAAC1K,KAAJ,CAAU,GAAV,CAAhB;AACA,MAAIgL,QAAQ,GAAG,MAAMpC,EAAE,CAACkC,SAAT,GAAqB,GAApC;;AAEA,OAAK,IAAItH,CAAC,GAAG,CAAR,EAAW0H,CAAC,GAAGD,OAAO,CAACvH,MAA5B,EAAoCF,CAAC,GAAG0H,CAAxC,EAA2C1H,CAAC,EAA5C,EAAgD;AAC9C,QAAM2H,OAAO,GAAGF,OAAO,CAACzH,CAAD,CAAvB;AACA,QAAI,CAAC2H,OAAL,EAAc;;AAEd,QAAIvC,EAAE,CAACgC,SAAP,EAAkB;AAChBhC,MAAAA,EAAE,CAACgC,SAAH,CAAaU,MAAb,CAAoBH,OAApB;AACD,KAFD,MAEO,IAAIV,QAAQ,CAAC7B,EAAD,EAAKuC,OAAL,CAAZ,EAA2B;AAChCH,MAAAA,QAAQ,GAAGA,QAAQ,CAAC7L,OAAT,CAAiB,MAAMgM,OAAN,GAAgB,GAAjC,EAAsC,GAAtC,CAAX;AACD;AACF;;AACD,MAAI,CAACvC,EAAE,CAACgC,SAAR,EAAmB;AACjBhC,IAAAA,EAAE,CAACkC,SAAH,GAAelL,IAAI,CAACoL,QAAD,CAAnB;AACD;AACF;AAED;;;;;;;;AAOO,IAAMO,QAAQ,GAAG,SAAXA,QAAW,CACtBzB,OADsB,EAEtB0B,SAFsB;AAItBA,EAAAA,SAAS,GAAGnM,SAAS,CAACmM,SAAD,CAArB;;AACA,MAAIA,SAAS,KAAK,OAAlB,EAA2B;AACzBA,IAAAA,SAAS,GAAG,UAAZ;AACD;;AACD,MAAI;AACF,QAAMlE,KAAK,GAAIwC,OAAO,CAACxC,KAAR,CAA8BkE,SAA9B,CAAf;AACA,QAAIlE,KAAJ,EAAW,OAAOA,KAAP;AAEX,QAAI,CAAChE,QAAD,IAAa,CAACA,QAAQ,CAACmI,WAA3B,EAAwC,OAAO,EAAP;AAExC,QAAMC,QAAQ,GAAGpI,QAAQ,CAACmI,WAAT,CAAqBE,gBAArB,CAAsC7B,OAAtC,EAA+C,EAA/C,CAAjB;AACA,WAAO4B,QAAQ,GAAIA,QAAwB,CAACF,SAAD,CAA5B,GAA0C,EAAzD;AACD,GARD,CAQE,OAAOI,CAAP,EAAU;AACV,WAAQ9B,OAAO,CAACxC,KAAR,CAA8BkE,SAA9B,CAAR;AACD;AACF,CAnBM;AAqBP;;;;;;;;;SAQgBK,SACd/B,SACA0B,WACA3C;AAEA,MAAI,CAACiB,OAAD,IAAY,CAAC0B,SAAjB,EAA4B;;AAE5B,MAAI/I,QAAQ,CAAC+I,SAAD,CAAZ,EAAyB;AACvB1I,IAAAA,MAAM,CAACC,IAAP,CAAYyI,SAAZ,EAAuBxI,OAAvB,CAA+B,UAAC8I,IAAD;AAC7BD,MAAAA,QAAQ,CAAC/B,OAAD,EAAUgC,IAAV,EAAiBN,SAAyB,CAACM,IAAD,CAA1C,CAAR;AACD,KAFD;AAGD,GAJD,MAIO;AACLN,IAAAA,SAAS,GAAGnM,SAAS,CAACmM,SAAD,CAArB;AACC1B,IAAAA,OAAO,CAACxC,KAAR,CAA8BkE,SAA9B,IAAqD3C,KAArD;AACF;AACF;AAED;;;;;;;;SAOgBkD,YACdjC,SACAxC;AAEA,MAAI,CAACwC,OAAD,IAAY,CAACxC,KAAjB,EAAwB;;AAExB,MAAI7E,QAAQ,CAAC6E,KAAD,CAAZ,EAAqB;AACnBxE,IAAAA,MAAM,CAACC,IAAP,CAAYuE,KAAZ,EAAmBtE,OAAnB,CAA2B,UAAC8I,IAAD;AACzBD,MAAAA,QAAQ,CAAC/B,OAAD,EAAUgC,IAAV,EAAgB,EAAhB,CAAR;AACD,KAFD;AAGD,GAJD,MAIO;AACLD,IAAAA,QAAQ,CAAC/B,OAAD,EAAUxC,KAAV,EAAiB,EAAjB,CAAR;AACD;AACF;AAED;;;;;;;;AAOO,IAAM0E,QAAQ,GAAG,SAAXA,QAAW,CAACpD,EAAD,EAAkBqD,UAAlB;;;AACtB,MAAMC,mBAAmB,GAAGD,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAKjG,SAAlE;AACA,MAAMmG,QAAQ,GAAGD,mBAAmB,GAChCX,QAAQ,CAAC3C,EAAD,EAAK,UAAL,CADwB,GAEhCqD,UAAU,GACVV,QAAQ,CAAC3C,EAAD,EAAK,YAAL,CADE,GAEV2C,QAAQ,CAAC3C,EAAD,EAAK,YAAL,CAJZ;AAMA,MAAI,CAACuD,QAAL,EAAe,OAAO,KAAP;AAEf,MAAI1I,GAAG,sBAAG0I,QAAQ,CAAC9J,KAAT,CAAe,eAAf,CAAH,oDAAG,gBAAiCqB,MAA3C;AACA,MAAI,CAACD,GAAL,EAAU,OAAO,KAAP;AACV,SAAO,IAAP;AACD,CAbM;AAeP;;;;;;;;AAOO,IAAM2I,kBAAkB,GAAG,SAArBA,kBAAqB,CAChCxD,EADgC,EAEhCqD,UAFgC;AAIhC,MAAII,MAAM,GAAgBzD,EAA1B;;AACA,SAAOyD,MAAP,EAAe;AACb,QAAI,CAAClL,MAAD,EAASmC,QAAT,EAAmBA,QAAQ,CAACgJ,eAA5B,EAA6CC,QAA7C,CAAsDF,MAAtD,CAAJ,EAAmE;AACjE,aAAOlL,MAAP;AACD;;AACD,QAAI6K,QAAQ,CAACK,MAAD,EAASJ,UAAT,CAAZ,EAAkC;AAChC,aAAOI,MAAP;AACD;;AACDA,IAAAA,MAAM,GAAGA,MAAM,CAACG,UAAhB;AACD;;AACD,SAAOH,MAAP;AACD,CAfM;AAiBP;;;;;;;;AAOO,IAAMI,aAAa,GAAG,SAAhBA,aAAgB,CAC3B7D,EAD2B,EAE3B8D,SAF2B;AAI3B,MAAI,CAAC9D,EAAD,IAAO,CAAC8D,SAAZ,EAAuB,OAAO,KAAP;AAEvB,MAAMC,MAAM,GAAG/D,EAAE,CAACgE,qBAAH,EAAf;AACA,MAAIC,aAAJ;;AAEA,MACE,CAAC1L,MAAD,EAASmC,QAAT,EAAmBA,QAAQ,CAACgJ,eAA5B,EAA6C,IAA7C,EAAmDtG,SAAnD,EAA8DuG,QAA9D,CACEG,SADF,CADF,EAIE;AACAG,IAAAA,aAAa,GAAG;AACdC,MAAAA,GAAG,EAAE,CADS;AAEdC,MAAAA,KAAK,EAAE5L,MAAM,CAAC6L,UAFA;AAGdC,MAAAA,MAAM,EAAE9L,MAAM,CAAC+L,WAHD;AAIdnE,MAAAA,IAAI,EAAE;AAJQ,KAAhB;AAMD,GAXD,MAWO;AACL8D,IAAAA,aAAa,GAAGH,SAAS,CAACE,qBAAV,EAAhB;AACD;;AAED,SACED,MAAM,CAACG,GAAP,GAAaD,aAAa,CAACI,MAA3B,IACAN,MAAM,CAACM,MAAP,GAAgBJ,aAAa,CAACC,GAD9B,IAEAH,MAAM,CAACI,KAAP,GAAeF,aAAa,CAAC9D,IAF7B,IAGA4D,MAAM,CAAC5D,IAAP,GAAc8D,aAAa,CAACE,KAJ9B;AAMD,CA9BM;AAgCP;;;;;;;AAMO,IAAMI,YAAY,GAAG,SAAfA,YAAe,CAACvE,EAAD;AAC1B,MAAIwE,MAAM,GAAG,CAAb;AACA,MAAIf,MAAM,GAAGzD,EAAb;;AAEA,SAAOyD,MAAP,EAAe;AACbe,IAAAA,MAAM,IAAIf,MAAM,CAACgB,SAAjB;AACAhB,IAAAA,MAAM,GAAGA,MAAM,CAACiB,YAAhB;AACD;;AAED,SAAOF,MAAP;AACD,CAVM;AAYP;;;;;;;;AAOO,IAAMG,oBAAoB,GAAG,SAAvBA,oBAAuB,CAClC3E,EADkC,EAElC4E,WAFkC;AAIlC,SAAOzO,IAAI,CAAC0O,GAAL,CAASN,YAAY,CAACvE,EAAD,CAAZ,GAAmBuE,YAAY,CAACK,WAAD,CAAxC,CAAP;AACD,CALM;AAOP;;;;;SAIgBE,qBAAqB5D;AACnC,MAAI,CAACA,OAAL,EAAc,OAAO;AAAEf,IAAAA,IAAI,EAAE,CAAR;AAAW+D,IAAAA,GAAG,EAAE;AAAhB,GAAP;AAEd,MAAIa,SAAS,GAAG7D,OAAO,CAACuD,SAAxB;AACA,MAAIO,UAAU,GAAG9D,OAAO,CAAC+D,UAAzB;AACA,MAAIC,OAAO,GAAGhE,OAAO,CAACwD,YAAtB;;AAEA,SAAOQ,OAAO,KAAK,IAAnB,EAAyB;AACvBH,IAAAA,SAAS,IAAIG,OAAO,CAACT,SAArB;AACAO,IAAAA,UAAU,IAAIE,OAAO,CAACD,UAAtB;AAEAC,IAAAA,OAAO,GAAGA,OAAO,CAACR,YAAlB;AACD;;AAED,MAAMS,MAAM,GAAGC,wBAAwB,CAAClE,OAAD,CAAvC;AACA,SAAO;AACLgD,IAAAA,GAAG,EAAEa,SAAS,GAAGI,MAAM,CAACE,MADnB;AAELlF,IAAAA,IAAI,EAAE6E,UAAU,GAAGG,MAAM,CAACG;AAFrB,GAAP;AAID;AAED;;;;;;;;;;SASgBC,aACdvF,IACAwF,WACAC;AAEAzF,EAAAA,EAAE,CAAC0F,aAAH,CAAiB,IAAIC,WAAJ,CAAgBH,SAAhB,EAA2B;AAAEC,IAAAA,MAAM,EAANA;AAAF,GAA3B,CAAjB;AACD;AAED;;;;;;;;SAOgBG,4BACdC,YACAC,eACAC;AAEA,MAAID,aAAa,KAAKC,QAAtB,EAAgC;AAC9B,WAAO,IAAP;AACD;;AAED,MAAIA,QAAQ,IAAI,CAACA,QAAQ,CAAC9D,QAAT,CAAkB6D,aAAlB,CAAjB,EAAmD;AACjD,WAAO,IAAP;AACD;;AAED,MAAInP,GAAG,GAAuBmP,aAA9B;;AACA,SAAOnP,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAKoP,QAA/B,EAAyC;AACvC,QAAM/D,SAAS,GAAGrL,GAAG,CAACqL,SAAtB;;AACA,QAAIA,SAAS,CAACC,QAAV,CAAmB4D,UAAnB,CAAJ,EAAoC;AAClC,aAAOlP,GAAP;AACD;;AAEDA,IAAAA,GAAG,GAAGA,GAAG,CAACqP,aAAV;AACD;;AAED,SAAO,IAAP;AACD;AAED;;;;;;;;SAOgBC,WACdC,KACAC;MACAC,gFAAY;AAEZnF,EAAAA,EAAE,CAACiF,GAAD,EAAM,OAAN,EAAe,UAAC/E,KAAD;AACf,QAAMkF,MAAM,GAAGT,2BAA2B,CACxCQ,SADwC,EAExCjF,KAAK,CAACkF,MAFkC,EAGxCH,GAHwC,CAA1C;AAKA,QAAI,CAACG,MAAL,EAAa;AAEbF,IAAAA,EAAE,CAACE,MAAD,CAAF;AACD,GATC,CAAF;AAUD;AAED;;;;;;;SAMgBC,2BACdtG;MACAuG,uFAAmB;;AAEnB,8BAAqCvG,EAAE,CAACgE,qBAAH,EAArC;AAAA,MAAQE,GAAR,yBAAQA,GAAR;AAAA,MAAa/D,IAAb,yBAAaA,IAAb;AAAA,MAAmBkE,MAAnB,yBAAmBA,MAAnB;AAAA,MAA2BF,KAA3B,yBAA2BA,KAA3B;;AACA,gBAAoC5L,MAApC;AAAA,MAAQ+L,WAAR,WAAQA,WAAR;AAAA,MAAqBF,UAArB,WAAqBA,UAArB;AACA,SAAOmC,gBAAgB,GACnB,CAAErC,GAAG,GAAG,CAAN,IAAWA,GAAG,GAAGI,WAAlB,IACED,MAAM,GAAG,CAAT,IAAcA,MAAM,GAAGC,WAD1B,MAEInE,IAAI,GAAG,CAAP,IAAYA,IAAI,GAAGiE,UAApB,IAAoCD,KAAK,GAAG,CAAR,IAAaA,KAAK,GAAGC,UAF5D,CADmB,GAInBF,GAAG,IAAI,CAAP,IAAY/D,IAAI,IAAI,CAApB,IAAyBkE,MAAM,IAAIC,WAAnC,IAAkDH,KAAK,IAAIC,UAJ/D;AAKD;AAED;;;;;;;SAMgBoC,eAAeH;AAC7B,MAAMI,YAAY,GAAGJ,MAAM,CAACI,YAA5B;AACA,MAAMC,SAAS,GAAGL,MAAM,CAACK,SAAzB;AACA,MAAMC,YAAY,GAAGN,MAAM,CAACM,YAA5B;;AAEA,MAAIA,YAAY,GAAGD,SAAf,KAA6BD,YAAjC,EAA+C;AAC7C,WAAO,IAAP;AACD;;AAED,SAAO,KAAP;AACD;AAED;;;;SAGgBG;AACd,MAAIlM,QAAQ,CAACmM,UAAT,KAAwB,YAA5B,EAA0C;AACxC,WAAO;AACLvB,MAAAA,KAAK,EAAE5K,QAAQ,CAACsE,IAAT,CAAc8H,WADhB;AAELzB,MAAAA,MAAM,EAAE3K,QAAQ,CAACsE,IAAT,CAAcyH;AAFjB,KAAP;AAID,GALD,MAKO;AACL,WAAO;AACLnB,MAAAA,KAAK,EAAE5K,QAAQ,CAACgJ,eAAT,CAAyBoD,WAD3B;AAELzB,MAAAA,MAAM,EAAE3K,QAAQ,CAACgJ,eAAT,CAAyB+C;AAF5B,KAAP;AAID;AACF;AAED;;;;;SAIgBrB,yBAAyBlE;AACvC,MAAIoE,KAAK,GAAG,CAAZ;AAAA,MACED,MAAM,GAAG,CADX;AAGA,MAAI0B,KAAK,GAAG7F,OAAO,CAAC0C,UAApB;;AACA,SAAOmD,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAKrM,QAAnC,EAA6C;AAC3C4K,IAAAA,KAAK,IAAIyB,KAAK,CAACC,UAAf;AACA3B,IAAAA,MAAM,IAAI0B,KAAK,CAACL,SAAhB;AAEAK,IAAAA,KAAK,GAAGA,KAAK,CAACnD,UAAd;AACD;;AAED,SAAO;AAAE0B,IAAAA,KAAK,EAAEA,KAAT;AAAgBD,IAAAA,MAAM,EAAEA;AAAxB,GAAP;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChgBD;;;AAGO,IAAM4B,SAAS,GACpB,qEADK;AAGP;;;;AAGO,IAAMC,aAAa,GAAG,4CAAtB;;;;;;;;ACTP;;;;;;AAMA,SAASC,MAAT,CAAgBC,IAAhB;AACE,MAAI,QAAOA,IAAP,MAAgB,QAApB,EAA8B;AAC5B,WAAOA,IAAP;AACD;;AAED,MAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5B,QAAI,WAAWtG,IAAX,CAAgBsG,IAAhB,CAAJ,EAA2B;AACzBA,MAAAA,IAAI,GAAG9P,QAAQ,CAAC8P,IAAD,CAAf;AACD,KAFD,MAEO;AACL;AACA;AACA;AACAA,MAAAA,IAAI,GAAGA,IAAI,CAAC7Q,OAAL,CAAa,aAAb,EAA4B,UAACG,GAAD,EAAMG,EAAN;AACjC,0BAAWA,EAAX;AACD,OAFM,CAAP;AAGD;AACF;;AAED,MAAI,OAAOuQ,IAAP,KAAgB,QAAhB,IAA4BA,IAAI,CAAC9Q,QAAL,GAAgBwE,MAAhB,KAA2B,EAA3D,EAA+D;AAC7DsM,IAAAA,IAAI,GAAGA,IAAI,GAAG,IAAd;AACD;;AAED,SAAO,IAAI/Q,IAAJ,CAAS+Q,IAAT,CAAP;AACD;AAED;;;;;;;;;SAOgBC,UACdD;MACAE,6EAAS;;AAET,MAAIC,SAAS,CAACzM,MAAV,KAAqB,CAArB,IAA0B,CAACsM,IAA/B,EAAqC;AACnC,WAAO,IAAP;AACD;;AAED,MAAMI,IAAI,GAASL,MAAM,CAACC,IAAD,CAAzB;AAEA,MAAMK,SAAS,GAAG;AAChBC,IAAAA,CAAC,EAAEF,IAAI,CAACG,WAAL,EADa;AAEhBC,IAAAA,CAAC,EAAEJ,IAAI,CAACK,QAAL,KAAkB,CAFL;AAGhBC,IAAAA,CAAC,EAAEN,IAAI,CAACO,OAAL,EAHa;AAIhBC,IAAAA,CAAC,EAAER,IAAI,CAACS,QAAL,EAJa;AAKhBrN,IAAAA,CAAC,EAAE4M,IAAI,CAACU,UAAL,EALa;AAMhBlH,IAAAA,CAAC,EAAEwG,IAAI,CAACW,UAAL,EANa;AAOhBtQ,IAAAA,CAAC,EAAE2P,IAAI,CAACY,MAAL;AAPa,GAAlB;AASA,MAAMC,QAAQ,GAAGf,MAAM,CAAC/Q,OAAP,CAAe,iBAAf,EAAkC,UAACwG,MAAD,EAAS/D,GAAT;AACjD,QAAMiH,KAAK,GAAIwH,SAAiB,CAACzO,GAAD,CAAhC;;AACA,QAAIA,GAAG,KAAK,GAAZ,EAAiB;AACf,aAAO,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoCiH,KAApC,CAAP;AACD;;AACD,WAAOA,KAAK,CAAC3J,QAAN,GAAiBmB,QAAjB,CAA0B,CAA1B,EAA6B,GAA7B,CAAP;AACD,GANgB,CAAjB;AAOA,SAAO4Q,QAAP;AACD;AAED;;;;;;;;SAOgBC,WAAWlB,MAA8BmB;AACvD,MAAMT,CAAC,GAAGX,MAAM,CAACC,IAAD,CAAhB;AACA,MAAMoB,GAAG,GAAGnS,IAAI,CAACmS,GAAL,EAAZ;AACA,MAAMC,IAAI,GAAG,CAACD,GAAG,GAAIV,CAAR,IAAqB,IAAlC;;AAEA,MAAIW,IAAI,GAAG,EAAX,EAAe;AACb,WAAO,IAAP;AACD,GAFD,MAEO,IAAIA,IAAI,GAAG,IAAX,EAAiB;AACtB,WAAOtS,IAAI,CAACuS,IAAL,CAAUD,IAAI,GAAG,EAAjB,IAAuB,KAA9B;AACD,GAFM,MAEA,IAAIA,IAAI,GAAG,OAAO,EAAlB,EAAsB;AAC3B,WAAOtS,IAAI,CAACuS,IAAL,CAAUD,IAAI,GAAG,IAAjB,IAAyB,KAAhC;AACD,GAFM,MAEA,IAAIA,IAAI,GAAG,OAAO,EAAP,GAAY,CAAvB,EAA0B;AAC/B,WAAO,KAAP;AACD;;AAED,SAAOpB,SAAS,CAACD,IAAD,EAAOmB,MAAP,CAAhB;AACD;;;;;;;;AC1FD;AAIA,IAAMI,oBAAoB,GAAG,IAAItP,GAAJ,EAA7B;AAOA;;;;;;AAKA,SAASuP,UAAT;AACE,MAAMC,GAAG,GAAkBC,wBAAI,EAA/B;;AAGAD,EAAAA,GAAG,CAACpH,IAAJ,GAAW,UAAC+D,SAAD,EAAuBpE,OAAvB;AACT,QAAMM,QAAQ,GAAG,SAAXA,QAAW;AACf,UAAIN,OAAJ,EAAa;AAAA,0CADeO,IACf;AADeA,UAAAA,IACf;AAAA;;AACXP,QAAAA,OAAO,CAACQ,KAAR,CAAc,IAAd,EAAoBD,IAApB;AACD;;AACDkH,MAAAA,GAAG,CAACtH,GAAJ,CAAQiE,SAAR,EAAmB9D,QAAnB;AACD,KALD;;AAMAmH,IAAAA,GAAG,CAAC5H,EAAJ,CAAOuE,SAAP,EAAkB9D,QAAlB;AACD,GARD;;AAUA,SAAOmH,GAAP;AACD;AAED;;;;;;;;SAMgBE,OAAOC;AACrB,MAAI,CAACA,YAAL,EAAmB;AACjB,UAAM,IAAIjH,KAAJ,uCAAN;AACD;;AAED,MAAIkH,GAAG,GAAGN,oBAAoB,CAACO,GAArB,CAAyBF,YAAzB,CAAV;;AACA,MAAIC,GAAJ,EAAS;AACP,WAAOA,GAAP;AACD;;AAEDA,EAAAA,GAAG,GAAGL,UAAU,EAAhB;AACAD,EAAAA,oBAAoB,CAAC1K,GAArB,CAAyB+K,YAAzB,EAAuCC,GAAvC;AAEA,SAAOA,GAAP;AACD;AAED;;;;SAGgBE;AACdR,EAAAA,oBAAoB,CAACS,KAArB;AACD;;;;;;;;;;;;;;;"}