{"version":3,"file":"weblibext.umd.js","sources":["../src/string.ts","../src/lib.ts","../src/dom.ts","../src/reg.ts","../src/time.ts","../src/event-bus.ts"],"sourcesContent":["import base64 from \"Base64\";\n\n/**\n * 随机字符串\n */\nexport function makeRandom() {\n  return (Math.random() / +new Date()).toString(36).replace(/\\d/g, \"\").slice(1);\n}\n\n/**\n * 字符串转小驼峰\n * @param {String} str --a-_b--- => aBC\n */\nexport function camelCase(str: string) {\n  if (!str) return \"\";\n\n  // 去除收尾的空格、横线、下划线\n  const tmp = str.replace(/^[_\\-\\s]*|[_\\-\\s]*$/g, \"\");\n  return tmp.replace(/[-_\\s]+(\\w)/g, (substr, $1) => $1.toUpperCase());\n}\n\n/**\n * 字符串首字母大写\n */\nexport function upperFirst(str: string) {\n  if (!str.trim()) return \"\";\n\n  return str.trim().replace(/^\\w/, ($1) => $1.toUpperCase());\n}\n\n/**\n * rgb转hex\n *\n * @param color\n * @returns\n */\nexport function rgbToHex(color: string) {\n  const values = color.replace(/(rgba?|[()]+|\\s+)/g, \"\").split(\",\");\n\n  const r = parseInt(values[0]) || 0;\n  const g = parseInt(values[1]) || 0;\n  const b = parseInt(values[2]) || 0;\n\n  return ((r << 16) + (g << 8) + b).toString(16).padStart(6, \"0\");\n}\n\n/**\n * hex转rgba\n * @param {String} color\n * @param {Float} alp\n */\nexport function hexToRgba(color: string, alp: number) {\n  const tmp = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(color);\n  if (!tmp) return \"\";\n\n  const r = parseInt(tmp[1], 16);\n  const g = parseInt(tmp[2], 16);\n  const b = parseInt(tmp[3], 16);\n  const a = alp;\n\n  return `rgba(${r},${g},${b},${a})`;\n}\n\n/**\n * rgba转rgb\n * @param {String} color\n */\nexport function rgbaToRgb(color: string) {\n  const values = color.replace(/(rgba?|[()]+|\\s+)/g, \"\").split(\",\");\n\n  const a = parseFloat(values[3]) || 1;\n  const r = Math.floor(a * parseInt(values[0]) + (1 - a) * 255);\n  const g = Math.floor(a * parseInt(values[1]) + (1 - a) * 255);\n  const b = Math.floor(a * parseInt(values[2]) + (1 - a) * 255);\n\n  const rr = \"0\" + r.toString(16).slice(-2);\n  const gg = \"0\" + g.toString(16).slice(-2);\n  const bb = \"0\" + b.toString(16).slice(-2);\n\n  return `#${rr}${gg}${bb}`;\n}\n\n/**\n * base64编码，兼容中文\n *\n * @param str\n * @returns\n */\nexport function encode(str: string) {\n  return base64.btoa(window.encodeURIComponent(str));\n}\n\n/**\n * base64解码，兼容中文\n *\n * @param str\n * @returns\n */\nexport function decode(str: string) {\n  return window.decodeURIComponent(base64.atob(str));\n}\n\n/**\n * 序列化，可以处理Set、Map、Function\n * @param obj\n * @param spaces\n * @returns\n */\nexport function stringify(obj: any, spaces = 0) {\n  return JSON.stringify(\n    obj,\n    (key: any, val: any) => {\n      if (typeof val === \"symbol\") {\n        return val.toString();\n      }\n      if (val instanceof Set) {\n        return Array.from(val);\n      }\n      if (val instanceof Map) {\n        return Array.from(val.entries());\n      }\n      if (typeof val === \"function\") {\n        return val.toString();\n      }\n      return val;\n    },\n    spaces\n  );\n}\n","import { PlainObject } from \"@type/index\";\n\n/**\n * URL参数解析\n * @param url\n * parseURLParameters(\"http://url.com/page?age=123&sname=ddd\"); // {age: \"123\", name: \"ddd\"}\n */\nexport function parseURLParameters(url: string) {\n  return (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce(\n    (a: PlainObject, v) => (\n      (a[v.slice(0, v.indexOf(\"=\"))] = v.slice(v.indexOf(\"=\") + 1)), a\n    ),\n    {}\n  );\n}\n\nexport const isObject = (val: any) => getObjectType(val);\n\n/**\n * 获取数据类型\n *\n * @param obj\n * @returns\n */\nexport function getObjectType(obj: any) {\n  return obj === null\n    ? \"null\"\n    : obj instanceof Array\n    ? \"array\"\n    : typeof obj !== \"object\"\n    ? typeof obj\n    : \"object\";\n}\n\n/**\n * 深拷贝\n *\n * @param obj\n * @returns\n */\nexport function deepClone(obj: any) {\n  const type = getObjectType(obj);\n  if (type === \"object\") {\n    const res: PlainObject = {};\n    Object.keys(obj).forEach((key) => {\n      res[key] = deepClone(obj[key]);\n    });\n    return res;\n  }\n\n  if (type === \"array\") {\n    const res: any[] = [];\n    obj.forEach((item: any) => {\n      res.push(deepClone(item));\n    });\n    return res;\n  }\n  return obj;\n}\n\n/**\n * 读cookie\n * @param key\n * @returns\n */\nexport function getCookie(key: string) {\n  const name = key + \"=\";\n  const ca = document.cookie.split(\";\");\n  for (let i = 0, len = ca.length; i < len; i++) {\n    let c = ca[i];\n    while (c.charAt(0) === \" \") {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) !== -1) {\n      return c.substring(name.length, c.length);\n    }\n  }\n\n  return \"\";\n}\n\n/**\n * 函数节流，一个周期内仅执行一次\n *\n * @param fn\n * @param wait\n */\nexport function throttle(fn: any, wait = 300, that?: any) {\n  let timer: any = null;\n\n  return function (...rest: any[]) {\n    if (typeof fn !== \"function\") return;\n    if (!timer) {\n      timer = setTimeout(() => {\n        timer = null;\n        fn.call(that, ...rest);\n      }, wait);\n    }\n  };\n}\n\n/**\n * 函数防抖\n * 连续触发N次，仅在最后一次执行\n *\n * @param fn\n * @param wait\n */\nexport function debounce(fn: any, wait = 300, that?: any) {\n  let timer: any = null;\n\n  return function (...rest: any[]) {\n    if (typeof fn !== \"function\") return;\n\n    clearTimeout(timer);\n    timer = setTimeout(fn.bind(that, ...rest), wait);\n  };\n}\n\n/**\n * 获取数组、集合、Map的最后一项\n * @param list\n */\nexport function lastItem(list: any[] | Set<any> | Map<any, any>) {\n  if (Array.isArray(list)) {\n    return list.slice(-1)[0];\n  }\n\n  if (list instanceof Set) {\n    return Array.from(list).slice(-1)[0];\n  }\n\n  if (list instanceof Map) {\n    return Array.from(list.values()).slice(-1)[0];\n  }\n}\n\n/**\n * 顺序执行Promise队列\n */\nexport const asyncSequentializer = (() => {\n  const toPromise = (x: any) => {\n    if (x instanceof Promise) {\n      return x;\n    }\n\n    if (typeof x === \"function\") {\n      // if function is not async this will turn its result into a promise\n      // if it is async this will await for the result\n      return (async () => await x())();\n    }\n\n    return Promise.resolve(x);\n  };\n\n  return (list: any[]) => {\n    const results: any[] = [];\n\n    return (\n      list\n        .reduce((lastPromise, currentPromise) => {\n          return lastPromise.then((res: any) => {\n            results.push(res); // collect the results\n            return toPromise(currentPromise);\n          });\n        }, toPromise(list.shift()))\n        // collect the final result and return the array of results as resolved promise\n        .then((res: any) => Promise.resolve([...results, res]))\n    );\n  };\n})();\n\n/**\n * 轮询，直到返回为true\n *\n * @param fn\n * @param validate\n * @param interval\n */\nexport async function poll(fn: Function, validate: Function, interval = 2500) {\n  const resolver = async (resolve: any, reject: any) => {\n    try {\n      const result = await fn();\n      const valid = validate(result);\n      if (valid === true) {\n        resolve(result);\n      } else if (valid === false) {\n        // https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout\n        // settimeout可以接受多个参数，多余的参数会传递到回掉函数中\n        setTimeout(resolver, interval, resolve, reject);\n      }\n    } catch (e) {\n      reject(e);\n    }\n  };\n  return new Promise(resolver);\n}\n\n/**\n * 找到树的第一个叶子节点\n */\nexport function findFirstLeafNode(arr: any[], childKey = \"child\") {\n  if (!Array.isArray(arr) || arr.length === 0) return undefined;\n\n  let child = [...arr];\n  let obj = child.shift();\n  while (Array.isArray(obj[childKey]) && obj[childKey].length > 0) {\n    child = [...obj[childKey]];\n    obj = child.shift();\n  }\n\n  return obj;\n}\n\n/**\n * 生成一颗树\n *\n * @param data\n * @param config\n * @returns\n */\nexport function makeTree(\n  data: PlainObject[],\n  config = { id: \"id\", pid: \"pid\" }\n) {\n  if (!Array.isArray(data)) {\n    return [];\n  }\n\n  const { id: _id, pid: _pid } = config;\n  const map = data.reduce((_map, item) => {\n    item.__id__ = item[_id];\n    item.__pid__ = item[_pid];\n    item.child = [];\n    _map[item.__id__] = item;\n    return _map;\n  }, {});\n\n  const set = new Set(Object.keys(map));\n  Object.keys(map).forEach((key) => {\n    const item = map[key];\n    const pid = item.__pid__;\n    const pItem = map[pid];\n    if (!pItem) return;\n    pItem.child.push(item);\n    set.delete(item.__id__);\n    Reflect.deleteProperty(item, \"__id__\");\n    Reflect.deleteProperty(item, \"__pid__\");\n  });\n\n  return Array.from(set.values()).map((id) => {\n    const item = { ...map[id] };\n    item[_id] = item.__id__;\n    item[_pid] = item.__pid__;\n    Reflect.deleteProperty(item, \"__id__\");\n    Reflect.deleteProperty(item, \"__pid__\");\n    return item;\n  });\n}\n\n/**\n * 通过a标签下载文件\n * @param url\n * @returns\n */\nexport function downFileByUrl(url: string) {\n  if (!url) return;\n\n  const fileName = url.slice(url.lastIndexOf(\"/\") + 1, url.length);\n\n  const tempLink = document.createElement(\"a\");\n  tempLink.style.display = \"none\";\n  tempLink.href = url;\n  tempLink.setAttribute(\"download\", decodeURI(fileName)); // 兼容：某些浏览器不支持HTML5的download属性\n\n  if (typeof tempLink.download === \"undefined\") {\n    tempLink.setAttribute(\"target\", \"_blank\");\n  }\n\n  document.body.appendChild(tempLink);\n  tempLink.click();\n  document.body.removeChild(tempLink);\n}\n\n/**\n * 将Blob数据以文件形式下载\n * @param binary 待转换的二进制数据\n * @param filename 待下载的文件名 res.headers['content-disposition'].match(/filename=(.*)/)[1];\n * @param type MIME 类型 res.headers['content-type']\n */\nexport function downFileByBlob(\n  binary: any,\n  filename = \"unknown\",\n  type = \"application/octet-stream\"\n) {\n  // 将二进制流转为blob\n  const blob = new Blob([binary], { type });\n  if (typeof window.navigator.msSaveBlob !== \"undefined\") {\n    // 兼容IE，window.navigator.msSaveBlob：以本地方式保存文件\n    window.navigator.msSaveBlob(blob, decodeURI(filename));\n  } else {\n    // 创建新的URL并指向File对象或者Blob对象的地址\n    const blobURL = window.URL.createObjectURL(blob);\n\n    const tempLink = document.createElement(\"a\");\n    tempLink.style.display = \"none\";\n    tempLink.href = blobURL;\n    tempLink.setAttribute(\"download\", decodeURI(filename)); // 兼容：某些浏览器不支持HTML5的download属性\n\n    if (typeof tempLink.download === \"undefined\") {\n      tempLink.setAttribute(\"target\", \"_blank\");\n    }\n\n    document.body.appendChild(tempLink);\n    tempLink.click();\n    document.body.removeChild(tempLink);\n    window.URL.revokeObjectURL(blobURL);\n  }\n}\n\n/**\n * 将字符串拷贝到粘贴板\n * @param str\n * @returns\n */\nexport function copyToClipboard(str: string) {\n  const el = document.createElement(\"textarea\");\n  el.value = str;\n  el.setAttribute(\"readonly\", \"readonly\");\n  el.style.position = \"absolute\";\n  el.style.left = \"-9999px\";\n  document.body.appendChild(el);\n\n  const selection = window.getSelection();\n\n  el.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(el);\n\n  if (!selection) return;\n\n  const selected = selection.rangeCount > 0 ? selection.getRangeAt(0) : false;\n  if (selected) {\n    selection.removeAllRanges();\n    selection.addRange(selected);\n  }\n}\n","import { PlainObject } from \"@type/index\";\nimport { camelCase } from \"./string\";\nimport { isObject } from \"./lib\";\n\n/**\n * 设备类型获取\n */\nexport function getDeviceType() {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n    navigator.userAgent\n  )\n    ? \"Mobile\"\n    : \"Desktop\";\n}\n\nconst trim = function (s: string) {\n  return (s || \"\").replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, \"\");\n};\n\n/**\n * 注册事件\n *\n * @param element\n * @param event\n * @param handler\n * @param useCapture\n */\nexport const on = function (\n  element: HTMLElement | Document | Window,\n  event: string,\n  handler: EventListenerOrEventListenerObject,\n  useCapture = false\n): void {\n  if (element && event && handler) {\n    element.addEventListener(event, handler, useCapture);\n  }\n};\n\n/**\n * 移除事件\n *\n * @param element\n * @param event\n * @param handler\n * @param useCapture\n */\nexport const off = function (\n  element: HTMLElement | Document | Window,\n  event: string,\n  handler: EventListenerOrEventListenerObject,\n  useCapture = false\n): void {\n  if (element && event && handler) {\n    element.removeEventListener(event, handler, useCapture);\n  }\n};\n\n/**\n * 仅触发一次的事件\n *\n * @param el\n * @param event\n * @param fn\n */\nexport const once = function (\n  el: HTMLElement,\n  event: string,\n  fn: EventListener\n): void {\n  const listener = function (...args: unknown[]) {\n    if (fn) {\n      fn.apply(this, args as any);\n    }\n    off(el, event, listener);\n  };\n  on(el, event, listener);\n};\n\n/**\n * 判断元素是否具有某个class\n *\n * @param el\n * @param cls\n * @returns\n */\nexport function hasClass(el: HTMLElement, cls: string): boolean {\n  if (!el || !cls) return false;\n  if (cls.indexOf(\" \") !== -1)\n    throw new Error(\"className should not contain space.\");\n  if (el.classList) {\n    return el.classList.contains(cls);\n  } else {\n    return (\" \" + el.className + \" \").indexOf(\" \" + cls + \" \") > -1;\n  }\n}\n\n/**\n * 给元素添加多个class\n *\n * @param el\n * @param cls \"abc efg\"\n * @returns\n */\nexport function addClass(el: HTMLElement, cls: string): void {\n  if (!el) return;\n  let curClass = el.className;\n  const classes = (cls || \"\").split(\" \");\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.add(clsName);\n    } else if (!hasClass(el, clsName)) {\n      curClass += \" \" + clsName;\n    }\n  }\n  if (!el.classList) {\n    el.className = curClass;\n  }\n}\n\n/**\n * 移除多个class\n *\n * @param el\n * @param cls \"abc efg\"\n * @returns\n */\nexport function removeClass(el: HTMLElement, cls: string): void {\n  if (!el || !cls) return;\n  const classes = cls.split(\" \");\n  let curClass = \" \" + el.className + \" \";\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.remove(clsName);\n    } else if (hasClass(el, clsName)) {\n      curClass = curClass.replace(\" \" + clsName + \" \", \" \");\n    }\n  }\n  if (!el.classList) {\n    el.className = trim(curClass);\n  }\n}\n\n/**\n * 获取元素的某个样式\n *\n * @param element\n * @param styleName\n * @returns\n */\nexport const getStyle = function (\n  element: HTMLElement,\n  styleName: string\n): string | null {\n  styleName = camelCase(styleName);\n  if (styleName === \"float\") {\n    styleName = \"cssFloat\";\n  }\n  try {\n    const style = (element.style as PlainObject)[styleName];\n    if (style) return style;\n\n    if (!document || !document.defaultView) return \"\";\n\n    const computed = document.defaultView.getComputedStyle(element, \"\");\n    return computed ? (computed as PlainObject)[styleName] : \"\";\n  } catch (e) {\n    return (element.style as PlainObject)[styleName];\n  }\n};\n\n/**\n * 修改元素样式\n *\n * @param element\n * @param styleName\n * @param value\n * @returns\n */\nexport function setStyle(\n  element: HTMLElement,\n  styleName: CSSStyleDeclaration | string,\n  value?: string\n): void {\n  if (!element || !styleName) return;\n\n  if (isObject(styleName)) {\n    Object.keys(styleName).forEach((prop) => {\n      setStyle(element, prop, (styleName as PlainObject)[prop]);\n    });\n  } else {\n    styleName = camelCase(styleName as string);\n    (element.style as PlainObject)[styleName as string] = value;\n  }\n}\n\n/**\n * 移除元素样式\n *\n * @param element\n * @param style\n * @returns\n */\nexport function removeStyle(\n  element: HTMLElement,\n  style: CSSStyleDeclaration | string\n) {\n  if (!element || !style) return;\n\n  if (isObject(style)) {\n    Object.keys(style).forEach((prop) => {\n      setStyle(element, prop, \"\");\n    });\n  } else {\n    setStyle(element, style, \"\");\n  }\n}\n\n/**\n * 是否允许滚动\n *\n * @param el\n * @param isVertical\n * @returns\n */\nexport const isScroll = (el: HTMLElement, isVertical?: boolean): boolean => {\n  const determinedDirection = isVertical === null || isVertical === undefined;\n  const overflow = determinedDirection\n    ? getStyle(el, \"overflow\")\n    : isVertical\n    ? getStyle(el, \"overflow-y\")\n    : getStyle(el, \"overflow-x\");\n\n  if (!overflow) return false;\n\n  let len = overflow.match(/(scroll|auto)/)?.length;\n  if (!len) return false;\n  return true;\n};\n\n/**\n * 获取元素的滚动盒子\n *\n * @param el\n * @param isVertical\n * @returns\n */\nexport const getScrollContainer = (\n  el: HTMLElement,\n  isVertical?: boolean\n): Window | HTMLElement => {\n  let parent: HTMLElement = el;\n  while (parent) {\n    if ([window, document, document.documentElement].includes(parent)) {\n      return window;\n    }\n    if (isScroll(parent, isVertical)) {\n      return parent;\n    }\n    parent = parent.parentNode as HTMLElement;\n  }\n  return parent;\n};\n\n/**\n * 指定元素是否在另一元素包裹中\n *\n * @param el\n * @param container\n * @returns\n */\nexport const isInContainer = (\n  el: HTMLElement,\n  container: HTMLElement\n): boolean => {\n  if (!el || !container) return false;\n\n  const elRect = el.getBoundingClientRect();\n  let containerRect: PlainObject;\n\n  if (\n    [window, document, document.documentElement, null, undefined].includes(\n      container\n    )\n  ) {\n    containerRect = {\n      top: 0,\n      right: window.innerWidth,\n      bottom: window.innerHeight,\n      left: 0,\n    };\n  } else {\n    containerRect = container.getBoundingClientRect();\n  }\n\n  return (\n    elRect.top < containerRect.bottom &&\n    elRect.bottom > containerRect.top &&\n    elRect.right > containerRect.left &&\n    elRect.left < containerRect.right\n  );\n};\n\n/**\n * 元素距离文档顶部的位置\n *\n * @param el\n * @returns\n */\nexport const getOffsetTop = (el: HTMLElement) => {\n  let offset = 0;\n  let parent = el;\n\n  while (parent) {\n    offset += parent.offsetTop;\n    parent = parent.offsetParent as HTMLElement;\n  }\n\n  return offset;\n};\n\n/**\n * 两元素顶部位置差\n *\n * @param el\n * @param containerEl\n * @returns\n */\nexport const getOffsetTopDistance = (\n  el: HTMLElement,\n  containerEl: HTMLElement\n) => {\n  return Math.abs(getOffsetTop(el) - getOffsetTop(containerEl));\n};\n\n/**\n * 节点在浏览器窗口中的位置\n * @param{domNode} element 起始节点\n */\nexport function getElementOffsetRoot(element: any) {\n  if (!element) return { left: 0, top: 0 };\n\n  let actualTop = element.offsetTop;\n  let actualLeft = element.offsetLeft;\n  let current = element.offsetParent;\n\n  while (current !== null) {\n    actualTop += current.offsetTop;\n    actualLeft += current.offsetLeft;\n\n    current = current.offsetParent;\n  }\n\n  const scroll = getTotalScrollOffsetRoot(element);\n  return {\n    top: actualTop - scroll.height,\n    left: actualLeft - scroll.width,\n  };\n}\n\n/**\n * 在执行元素上触发指定的事件，且可传递自定义事件\n *\n * @param el\n * @param eventType\n * @param detail\n *\n * eg：triggerEvent(document.getElementById('id'), 'click', {name: '123'})\n */\nexport function triggerEvent(\n  el: HTMLElement,\n  eventType: string,\n  detail: PlainObject\n) {\n  el.dispatchEvent(new CustomEvent(eventType, { detail }));\n}\n\n/**\n * 查找指定具备ClassName的父节点\n * @param pClassName\n * @param currentTarget\n * @param rootNode\n * @returns\n */\nexport function lookupParentNodeByClassName(\n  pClassName: string,\n  currentTarget: HTMLElement,\n  rootNode: HTMLElement\n) {\n  if (currentTarget === rootNode) {\n    return null;\n  }\n\n  if (rootNode && !rootNode.contains(currentTarget)) {\n    return null;\n  }\n\n  let tmp: HTMLElement | null = currentTarget;\n  while (tmp !== null && tmp !== rootNode) {\n    const classList = tmp.classList;\n    if (classList.contains(pClassName)) {\n      return tmp;\n    }\n\n    tmp = tmp.parentElement;\n  }\n\n  return null;\n}\n\n/**\n * DOM事件代理\n *\n * @param pEl\n * @param cb\n * @param itemClass\n */\nexport function clickProxy(\n  pEl: HTMLElement,\n  cb: (target: HTMLElement) => void,\n  itemClass = \"item\"\n) {\n  on(pEl, \"click\", (event) => {\n    const target = lookupParentNodeByClassName(\n      itemClass,\n      event.target as HTMLElement,\n      pEl\n    );\n    if (!target) return;\n\n    cb(target);\n  });\n}\n\n/**\n * 判断指定元素是否在可视窗口中\n *\n * @param el\n * @param partiallyVisible true为完全可见；false为完全可见\n */\nexport function elementIsVisibleInViewport(\n  el: HTMLElement,\n  partiallyVisible = false\n) {\n  const { top, left, bottom, right } = el.getBoundingClientRect();\n  const { innerHeight, innerWidth } = window;\n  return partiallyVisible\n    ? ((top > 0 && top < innerHeight) ||\n        (bottom > 0 && bottom < innerHeight)) &&\n        ((left > 0 && left < innerWidth) || (right > 0 && right < innerWidth))\n    : top >= 0 && left >= 0 && bottom <= innerHeight && right <= innerWidth;\n}\n\n/**\n * 是否滚动到底部\n *\n * @param target\n * @returns\n */\nexport function isScrollBottom(target: HTMLElement) {\n  const clientHeight = target.clientHeight;\n  const scrollTop = target.scrollTop;\n  const scrollHeight = target.scrollHeight;\n\n  if (scrollHeight - scrollTop === clientHeight) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * 获取浏览器窗口的大小\n */\nexport function getViewport() {\n  if (document.compatMode === \"BackCompat\") {\n    return {\n      width: document.body.clientWidth,\n      height: document.body.clientHeight,\n    };\n  } else {\n    return {\n      width: document.documentElement.clientWidth,\n      height: document.documentElement.clientHeight,\n    };\n  }\n}\n\n/**\n * 相对于根节点的所有滚动总和\n * @param{domNode} element 起始节点\n */\nexport function getTotalScrollOffsetRoot(element: any) {\n  let width = 0,\n    height = 0;\n\n  let pNode = element.parentNode;\n  while (pNode !== null && pNode !== document) {\n    width += pNode.scrollLeft;\n    height += pNode.scrollTop;\n\n    pNode = pNode.parentNode;\n  }\n\n  return { width: width, height: height };\n}\n","/**\n * IP地址\n */\nexport const REGEXP_IP =\n  /^((2[0-4]\\d|25[0-5]|[01]?\\d\\d?)\\.){3}(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)$/;\n\n/**\n * 字符串\n */\nexport const REGEXP_STRING = /^[a-zA-Z0-9-_:：（）\\(\\)\\u4e00-\\u9fa5]{1,30}$/;\n","/**\n * 将时间统一转化为Date标准格式\n *\n * @param time\n * @returns\n */\nfunction toDate(time: Date | string | number): Date {\n  if (typeof time === \"object\") {\n    return time;\n  }\n\n  if (typeof time === \"string\") {\n    if (/^[0-9]+$/.test(time)) {\n      time = parseInt(time);\n    } else {\n      // 将ISO Date格式修改为GMT的时间格式\n      // 2021-02-26T04:02:57:677Z\n      // 2021-02-26T04:02:57.677Z\n      time = time.replace(/:(.{3}z)$/gi, (str, $1) => {\n        return `.${$1}`;\n      });\n    }\n  }\n\n  if (typeof time === \"number\" && time.toString().length === 10) {\n    time = time * 1000;\n  }\n\n  return new Date(time as number);\n}\n\n/**\n * 解析时间\n *\n * @param time\n * @param format\n * @returns\n */\nexport function parseTime(\n  time: Date | string | number,\n  format = \"{y}-{m}-{d} {h}:{i}:{s}\"\n): string | null {\n  if (arguments.length === 0 || !time) {\n    return null;\n  }\n\n  const date: Date = toDate(time);\n\n  const formatObj = {\n    y: date.getFullYear(),\n    m: date.getMonth() + 1,\n    d: date.getDate(),\n    h: date.getHours(),\n    i: date.getMinutes(),\n    s: date.getSeconds(),\n    a: date.getDay(),\n  };\n  const time_str = format.replace(/{([ymdhisa])+}/g, (result, key) => {\n    const value = (formatObj as any)[key];\n    if (key === \"a\") {\n      return [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"][value];\n    }\n    return value.toString().padStart(2, \"0\");\n  });\n  return time_str;\n}\n\n/**\n * 将时间格式化\n *\n * @param time\n * @param option\n * @returns\n */\nexport function formatTime(time: Date | string | number, option?: string) {\n  const d = toDate(time);\n  const now = Date.now();\n  const diff = (now - (d as any)) / 1000;\n\n  if (diff < 30) {\n    return \"刚刚\";\n  } else if (diff < 3600) {\n    return Math.ceil(diff / 60) + \"分钟前\";\n  } else if (diff < 3600 * 24) {\n    return Math.ceil(diff / 3600) + \"小时前\";\n  } else if (diff < 3600 * 24 * 2) {\n    return \"1天前\";\n  }\n\n  return parseTime(time, option);\n}\n","// 全局事件车\n\nimport mitt, { Handler, EventType, Emitter, WildcardHandler } from \"mitt\";\n\nconst ENVENT_BUS_INSTANCES = new Map();\n\ntype CustomEmitter = Emitter & {\n  once<T = any>(type: EventType, handler: Handler<T>): void;\n  once(type: \"*\", handler: WildcardHandler): void;\n};\n\n/**\n * 生成事件车\n *\n * @returns\n */\nfunction makeOneBus() {\n  const bus: CustomEmitter = mitt() as CustomEmitter;\n\n  // 仅触发一次的事件\n  bus.once = (eventType: EventType, handler: Handler) => {\n    const listener = function (...args: unknown[]) {\n      if (handler) {\n        handler.apply(this, args as any);\n      }\n      bus.off(eventType, listener);\n    };\n    bus.on(eventType, listener);\n  };\n\n  return bus;\n}\n\n/**\n * 获取事件车实例\n *\n * @param instanceName\n * @returns\n */\nexport function getBus(instanceName: string): CustomEmitter {\n  if (!instanceName) {\n    throw new Error(`Event Bus Require One Instance Name`);\n  }\n\n  let ins = ENVENT_BUS_INSTANCES.get(instanceName);\n  if (ins) {\n    return ins;\n  }\n\n  ins = makeOneBus();\n  ENVENT_BUS_INSTANCES.set(instanceName, ins);\n\n  return ins;\n}\n\n/**\n * 销毁所有的事件车\n */\nexport function destoryAllBus() {\n  ENVENT_BUS_INSTANCES.clear();\n}\n"],"names":["makeRandom","Math","random","Date","toString","replace","slice","camelCase","str","tmp","substr","$1","toUpperCase","upperFirst","trim","rgbToHex","color","values","split","r","parseInt","g","b","padStart","hexToRgba","alp","exec","a","rgbaToRgb","parseFloat","floor","rr","gg","bb","encode","base64","btoa","window","encodeURIComponent","decode","decodeURIComponent","atob","stringify","obj","spaces","JSON","key","val","Set","Array","from","Map","entries","parseURLParameters","url","match","reduce","v","indexOf","isObject","getObjectType","deepClone","type","res","Object","keys","forEach","item","push","getCookie","name","ca","document","cookie","i","len","length","c","charAt","substring","throttle","fn","wait","that","timer","rest","setTimeout","call","debounce","clearTimeout","bind","lastItem","list","isArray","asyncSequentializer","toPromise","x","Promise","resolve","results","lastPromise","currentPromise","then","shift","poll","validate","interval","resolver","reject","result","valid","findFirstLeafNode","arr","childKey","undefined","child","makeTree","data","config","id","pid","_id","_pid","map","_map","__id__","__pid__","set","pItem","Reflect","deleteProperty","downFileByUrl","fileName","lastIndexOf","tempLink","createElement","style","display","href","setAttribute","decodeURI","download","body","appendChild","click","removeChild","downFileByBlob","binary","filename","blob","Blob","navigator","msSaveBlob","blobURL","URL","createObjectURL","revokeObjectURL","copyToClipboard","el","value","position","left","selection","getSelection","select","execCommand","selected","rangeCount","getRangeAt","removeAllRanges","addRange","getDeviceType","test","userAgent","s","on","element","event","handler","useCapture","addEventListener","off","removeEventListener","once","listener","args","apply","hasClass","cls","Error","classList","contains","className","addClass","curClass","classes","j","clsName","add","removeClass","remove","getStyle","styleName","defaultView","computed","getComputedStyle","e","setStyle","prop","removeStyle","isScroll","isVertical","determinedDirection","overflow","getScrollContainer","parent","documentElement","includes","parentNode","isInContainer","container","elRect","getBoundingClientRect","containerRect","top","right","innerWidth","bottom","innerHeight","getOffsetTop","offset","offsetTop","offsetParent","getOffsetTopDistance","containerEl","abs","getElementOffsetRoot","actualTop","actualLeft","offsetLeft","current","scroll","getTotalScrollOffsetRoot","height","width","triggerEvent","eventType","detail","dispatchEvent","CustomEvent","lookupParentNodeByClassName","pClassName","currentTarget","rootNode","parentElement","clickProxy","pEl","cb","itemClass","target","elementIsVisibleInViewport","partiallyVisible","isScrollBottom","clientHeight","scrollTop","scrollHeight","getViewport","compatMode","clientWidth","pNode","scrollLeft","REGEXP_IP","REGEXP_STRING","toDate","time","parseTime","format","arguments","date","formatObj","y","getFullYear","m","getMonth","d","getDate","h","getHours","getMinutes","getSeconds","getDay","time_str","formatTime","option","now","diff","ceil","ENVENT_BUS_INSTANCES","makeOneBus","bus","mitt","getBus","instanceName","ins","get","destoryAllBus","clear"],"mappings":"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"}