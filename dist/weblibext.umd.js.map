{"version":3,"file":"weblibext.umd.js","sources":["../src/StringUtil.ts","../src/Tool.ts","../src/DomUtil.ts","../src/TimeUtil.ts","../src/EventBus.ts","../src/RegUtil.ts"],"sourcesContent":["import base64 from \"Base64\";\n\n/**\n * 随机字符串\n */\nexport function makeRandom() {\n  return (Math.random() / +new Date()).toString(36).replace(/\\d/g, \"\").slice(1);\n}\n\n/**\n * 字符串转小驼峰\n * @param {String} str --a-_b--- => aBC\n */\nexport function camelCase(str: string) {\n  if (!str) return \"\";\n\n  // 去除收尾的空格、横线、下划线\n  const tmp = str.replace(/^[_\\-\\s]*|[_\\-\\s]*$/g, \"\");\n  return tmp.replace(/[-_\\s]+(\\w)/g, (substr, $1) => $1.toUpperCase());\n}\n\n/**\n * 字符串首字母大写\n */\nexport function upperFirst(str: string) {\n  if (!str.trim()) return \"\";\n\n  return str.trim().replace(/^\\w/, ($1) => $1.toUpperCase());\n}\n\n/**\n * rgb转hex\n *\n * @param color\n * @returns\n */\nexport function rgbToHex(color: string) {\n  const values = color.replace(/(rgba?|[()]+|\\s+)/g, \"\").split(\",\");\n\n  const r = parseInt(values[0]) || 0;\n  const g = parseInt(values[1]) || 0;\n  const b = parseInt(values[2]) || 0;\n\n  return ((r << 16) + (g << 8) + b).toString(16).padStart(6, \"0\");\n}\n\n/**\n * hex转rgba\n * @param {String} color\n * @param {Float} alp\n */\nexport function hexToRgba(color: string, alp: number) {\n  const tmp = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(color);\n  if (!tmp) return \"\";\n\n  const r = parseInt(tmp[1], 16);\n  const g = parseInt(tmp[2], 16);\n  const b = parseInt(tmp[3], 16);\n  const a = alp;\n\n  return `rgba(${r},${g},${b},${a})`;\n}\n\n/**\n * rgba转rgb\n * @param {String} color\n */\nexport function rgbaToRgb(color: string) {\n  const values = color.replace(/(rgba?|[()]+|\\s+)/g, \"\").split(\",\");\n\n  const a = parseFloat(values[3]) || 1;\n  const r = Math.floor(a * parseInt(values[0]) + (1 - a) * 255);\n  const g = Math.floor(a * parseInt(values[1]) + (1 - a) * 255);\n  const b = Math.floor(a * parseInt(values[2]) + (1 - a) * 255);\n\n  const rr = \"0\" + r.toString(16).slice(-2);\n  const gg = \"0\" + g.toString(16).slice(-2);\n  const bb = \"0\" + b.toString(16).slice(-2);\n\n  return `#${rr}${gg}${bb}`;\n}\n\n/**\n * base64编码，兼容中文\n *\n * @param str\n * @returns\n */\nexport function encode(str: string) {\n  return base64.btoa(window.encodeURIComponent(str));\n}\n\n/**\n * base64解码，兼容中文\n *\n * @param str\n * @returns\n */\nexport function decode(str: string) {\n  return window.decodeURIComponent(base64.atob(str));\n}\n","import { PlainObject } from \"@type/index\";\n\nexport const isObject = (val: any) => getObjectType(val);\n\n/**\n * 获取数据类型\n *\n * @param obj\n * @returns\n */\nexport function getObjectType(obj: any) {\n  return obj === null\n    ? \"null\"\n    : obj instanceof Array\n    ? \"array\"\n    : typeof obj !== \"object\"\n    ? typeof obj\n    : \"object\";\n}\n\n/**\n * 深拷贝\n *\n * @param obj\n * @returns\n */\nexport function deepClone(obj: any) {\n  const type = getObjectType(obj);\n  if (type === \"object\") {\n    const res: PlainObject = {};\n    Object.keys(obj).forEach((key) => {\n      res[key] = deepClone(obj[key]);\n    });\n    return res;\n  }\n\n  if (type === \"array\") {\n    const res: any[] = [];\n    obj.forEach((item: any) => {\n      res.push(deepClone(item));\n    });\n    return res;\n  }\n  return obj;\n}\n\n/**\n * 读cookie\n * @param key\n * @returns\n */\nexport function getCookie(key: string) {\n  const name = key + \"=\";\n  const ca = document.cookie.split(\";\");\n  for (let i = 0, len = ca.length; i < len; i++) {\n    let c = ca[i];\n    while (c.charAt(0) === \" \") {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) !== -1) {\n      return c.substring(name.length, c.length);\n    }\n  }\n\n  return \"\";\n}\n\n/**\n * 函数节流，一个周期内仅执行一次\n *\n * @param fn\n * @param wait\n */\nexport function throttle(fn: any, wait = 300, that?: any) {\n  let timer: any = null;\n\n  return function (...rest: any[]) {\n    if (typeof fn !== \"function\") return;\n    if (!timer) {\n      timer = setTimeout(() => {\n        timer = null;\n        fn.call(that, ...rest);\n      }, wait);\n    }\n  };\n}\n\n/**\n * 函数防抖\n * 连续触发N次，仅在最后一次执行\n *\n * @param fn\n * @param wait\n */\nexport function debounce(fn: any, wait = 300, that?: any) {\n  let timer: any = null;\n\n  return function (...rest: any[]) {\n    if (typeof fn !== \"function\") return;\n\n    clearTimeout(timer);\n    timer = setTimeout(fn.bind(that, ...rest), wait);\n  };\n}\n\n/**\n * 获取数组、集合、Map的最后一项\n * @param list\n */\nexport function lastItem(list: any[] | Set<any> | Map<any, any>) {\n  if (Array.isArray(list)) {\n    return list.slice(-1)[0];\n  }\n\n  if (list instanceof Set) {\n    return Array.from(list).slice(-1)[0];\n  }\n\n  if (list instanceof Map) {\n    return Array.from(list.values()).slice(-1)[0];\n  }\n}\n\n/**\n * 序列化，可以处理Set、Map、Function\n */\nexport const stringify = (() => {\n  const replacer = (key: any, val: any) => {\n    if (typeof val === \"symbol\") {\n      return val.toString();\n    }\n    if (val instanceof Set) {\n      return Array.from(val);\n    }\n    if (val instanceof Map) {\n      return Array.from(val.entries());\n    }\n    if (typeof val === \"function\") {\n      return val.toString();\n    }\n    return val;\n  };\n\n  return (obj: any, spaces = 0) => JSON.stringify(obj, replacer, spaces);\n})();\n\n/**\n * 顺序执行Promise队列\n */\nexport const asyncSequentializer = (() => {\n  const toPromise = (x: any) => {\n    if (x instanceof Promise) {\n      return x;\n    }\n\n    if (typeof x === \"function\") {\n      // if function is not async this will turn its result into a promise\n      // if it is async this will await for the result\n      return (async () => await x())();\n    }\n\n    return Promise.resolve(x);\n  };\n\n  return (list: any[]) => {\n    const results: any[] = [];\n\n    return (\n      list\n        .reduce((lastPromise, currentPromise) => {\n          return lastPromise.then((res: any) => {\n            results.push(res); // collect the results\n            return toPromise(currentPromise);\n          });\n        }, toPromise(list.shift()))\n        // collect the final result and return the array of results as resolved promise\n        .then((res: any) => Promise.resolve([...results, res]))\n    );\n  };\n})();\n\n/**\n * 轮询，直到返回为true\n *\n * @param fn\n * @param validate\n * @param interval\n */\nexport async function poll(fn: Function, validate: Function, interval = 2500) {\n  const resolver = async (resolve: any, reject: any) => {\n    try {\n      const result = await fn();\n      const valid = validate(result);\n      if (valid === true) {\n        resolve(result);\n      } else if (valid === false) {\n        // https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout\n        // settimeout可以接受多个参数，多余的参数会传递到回掉函数中\n        setTimeout(resolver, interval, resolve, reject);\n      }\n    } catch (e) {\n      reject(e);\n    }\n  };\n  return new Promise(resolver);\n}\n\n/**\n * 找到树的第一个叶子节点\n */\nexport function findFirstLeafNode(arr: any[], childKey = \"child\") {\n  if (!Array.isArray(arr) || arr.length === 0) return undefined;\n\n  let child = [...arr];\n  let obj = child.shift();\n  while (Array.isArray(obj[childKey]) && obj[childKey].length > 0) {\n    child = [...obj[childKey]];\n    obj = child.shift();\n  }\n\n  return obj;\n}\n\n/**\n * 生成一颗树\n *\n * @param data\n * @param config\n * @returns\n */\nexport function makeTree(\n  data: PlainObject[],\n  config = { id: \"id\", pid: \"pid\" }\n) {\n  if (!Array.isArray(data)) {\n    return [];\n  }\n\n  const { id: _id, pid: _pid } = config;\n  const map = data.reduce((_map, item) => {\n    item.__id__ = item[_id];\n    item.__pid__ = item[_pid];\n    item.child = [];\n    _map[item.__id__] = item;\n    return _map;\n  }, {});\n\n  const set = new Set(Object.keys(map));\n  Object.keys(map).forEach((key) => {\n    const item = map[key];\n    const pid = item.__pid__;\n    const pItem = map[pid];\n    if (!pItem) return;\n    pItem.child.push(item);\n    set.delete(item.__id__);\n    Reflect.deleteProperty(item, \"__id__\");\n    Reflect.deleteProperty(item, \"__pid__\");\n  });\n\n  return Array.from(set.values()).map((id) => {\n    const item = { ...map[id] };\n    item[_id] = item.__id__;\n    item[_pid] = item.__pid__;\n    Reflect.deleteProperty(item, \"__id__\");\n    Reflect.deleteProperty(item, \"__pid__\");\n    return item;\n  });\n}\n","import { PlainObject } from \"@type/index\";\nimport { camelCase } from \"./StringUtil\";\nimport { isObject } from \"./Tool\";\n\n/**\n * 设备类型获取\n */\nexport function getDeviceType() {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n    navigator.userAgent\n  )\n    ? \"Mobile\"\n    : \"Desktop\";\n}\n\n/**\n * URL参数解析\n * @param url\n * parseURLParameters(\"http://url.com/page?age=123&sname=ddd\"); // {age: \"123\", name: \"ddd\"}\n */\nexport function parseURLParameters(url: string) {\n  return (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce(\n    (a: PlainObject, v) => (\n      (a[v.slice(0, v.indexOf(\"=\"))] = v.slice(v.indexOf(\"=\") + 1)), a\n    ),\n    {}\n  );\n}\n\nconst trim = function (s: string) {\n  return (s || \"\").replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, \"\");\n};\n\n/**\n * 注册事件\n *\n * @param element\n * @param event\n * @param handler\n * @param useCapture\n */\nexport const on = function (\n  element: HTMLElement | Document | Window,\n  event: string,\n  handler: EventListenerOrEventListenerObject,\n  useCapture = false\n): void {\n  if (element && event && handler) {\n    element.addEventListener(event, handler, useCapture);\n  }\n};\n\n/**\n * 移除事件\n *\n * @param element\n * @param event\n * @param handler\n * @param useCapture\n */\nexport const off = function (\n  element: HTMLElement | Document | Window,\n  event: string,\n  handler: EventListenerOrEventListenerObject,\n  useCapture = false\n): void {\n  if (element && event && handler) {\n    element.removeEventListener(event, handler, useCapture);\n  }\n};\n\n/**\n * 仅触发一次的事件\n *\n * @param el\n * @param event\n * @param fn\n */\nexport const once = function (\n  el: HTMLElement,\n  event: string,\n  fn: EventListener\n): void {\n  const listener = function (...args: unknown[]) {\n    if (fn) {\n      fn.apply(this, args as any);\n    }\n    off(el, event, listener);\n  };\n  on(el, event, listener);\n};\n\n/**\n * 判断元素是否具有某个class\n *\n * @param el\n * @param cls\n * @returns\n */\nexport function hasClass(el: HTMLElement, cls: string): boolean {\n  if (!el || !cls) return false;\n  if (cls.indexOf(\" \") !== -1)\n    throw new Error(\"className should not contain space.\");\n  if (el.classList) {\n    return el.classList.contains(cls);\n  } else {\n    return (\" \" + el.className + \" \").indexOf(\" \" + cls + \" \") > -1;\n  }\n}\n\n/**\n * 给元素添加多个class\n *\n * @param el\n * @param cls \"abc efg\"\n * @returns\n */\nexport function addClass(el: HTMLElement, cls: string): void {\n  if (!el) return;\n  let curClass = el.className;\n  const classes = (cls || \"\").split(\" \");\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.add(clsName);\n    } else if (!hasClass(el, clsName)) {\n      curClass += \" \" + clsName;\n    }\n  }\n  if (!el.classList) {\n    el.className = curClass;\n  }\n}\n\n/**\n * 移除多个class\n *\n * @param el\n * @param cls \"abc efg\"\n * @returns\n */\nexport function removeClass(el: HTMLElement, cls: string): void {\n  if (!el || !cls) return;\n  const classes = cls.split(\" \");\n  let curClass = \" \" + el.className + \" \";\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.remove(clsName);\n    } else if (hasClass(el, clsName)) {\n      curClass = curClass.replace(\" \" + clsName + \" \", \" \");\n    }\n  }\n  if (!el.classList) {\n    el.className = trim(curClass);\n  }\n}\n\n/**\n * 获取元素的某个样式\n *\n * @param element\n * @param styleName\n * @returns\n */\nexport const getStyle = function (\n  element: HTMLElement,\n  styleName: string\n): string | null {\n  styleName = camelCase(styleName);\n  if (styleName === \"float\") {\n    styleName = \"cssFloat\";\n  }\n  try {\n    const style = (element.style as PlainObject)[styleName];\n    if (style) return style;\n\n    if (!document || !document.defaultView) return \"\";\n\n    const computed = document.defaultView.getComputedStyle(element, \"\");\n    return computed ? (computed as PlainObject)[styleName] : \"\";\n  } catch (e) {\n    return (element.style as PlainObject)[styleName];\n  }\n};\n\n/**\n * 修改元素样式\n *\n * @param element\n * @param styleName\n * @param value\n * @returns\n */\nexport function setStyle(\n  element: HTMLElement,\n  styleName: CSSStyleDeclaration | string,\n  value?: string\n): void {\n  if (!element || !styleName) return;\n\n  if (isObject(styleName)) {\n    Object.keys(styleName).forEach((prop) => {\n      setStyle(element, prop, (styleName as PlainObject)[prop]);\n    });\n  } else {\n    styleName = camelCase(styleName as string);\n    (element.style as PlainObject)[styleName as string] = value;\n  }\n}\n\n/**\n * 移除元素样式\n *\n * @param element\n * @param style\n * @returns\n */\nexport function removeStyle(\n  element: HTMLElement,\n  style: CSSStyleDeclaration | string\n) {\n  if (!element || !style) return;\n\n  if (isObject(style)) {\n    Object.keys(style).forEach((prop) => {\n      setStyle(element, prop, \"\");\n    });\n  } else {\n    setStyle(element, style, \"\");\n  }\n}\n\n/**\n * 是否允许滚动\n *\n * @param el\n * @param isVertical\n * @returns\n */\nexport const isScroll = (el: HTMLElement, isVertical?: boolean): boolean => {\n  const determinedDirection = isVertical === null || isVertical === undefined;\n  const overflow = determinedDirection\n    ? getStyle(el, \"overflow\")\n    : isVertical\n    ? getStyle(el, \"overflow-y\")\n    : getStyle(el, \"overflow-x\");\n\n  if (!overflow) return false;\n\n  let len = overflow.match(/(scroll|auto)/)?.length;\n  if (!len) return false;\n  return true;\n};\n\n/**\n * 获取元素的滚动盒子\n *\n * @param el\n * @param isVertical\n * @returns\n */\nexport const getScrollContainer = (\n  el: HTMLElement,\n  isVertical?: boolean\n): Window | HTMLElement => {\n  let parent: HTMLElement = el;\n  while (parent) {\n    if ([window, document, document.documentElement].includes(parent)) {\n      return window;\n    }\n    if (isScroll(parent, isVertical)) {\n      return parent;\n    }\n    parent = parent.parentNode as HTMLElement;\n  }\n  return parent;\n};\n\n/**\n * 指定元素是否在另一元素包裹中\n *\n * @param el\n * @param container\n * @returns\n */\nexport const isInContainer = (\n  el: HTMLElement,\n  container: HTMLElement\n): boolean => {\n  if (!el || !container) return false;\n\n  const elRect = el.getBoundingClientRect();\n  let containerRect: PlainObject;\n\n  if (\n    [window, document, document.documentElement, null, undefined].includes(\n      container\n    )\n  ) {\n    containerRect = {\n      top: 0,\n      right: window.innerWidth,\n      bottom: window.innerHeight,\n      left: 0,\n    };\n  } else {\n    containerRect = container.getBoundingClientRect();\n  }\n\n  return (\n    elRect.top < containerRect.bottom &&\n    elRect.bottom > containerRect.top &&\n    elRect.right > containerRect.left &&\n    elRect.left < containerRect.right\n  );\n};\n\n/**\n * 元素距离文档顶部的位置\n *\n * @param el\n * @returns\n */\nexport const getOffsetTop = (el: HTMLElement) => {\n  let offset = 0;\n  let parent = el;\n\n  while (parent) {\n    offset += parent.offsetTop;\n    parent = parent.offsetParent as HTMLElement;\n  }\n\n  return offset;\n};\n\n/**\n * 两元素顶部位置差\n *\n * @param el\n * @param containerEl\n * @returns\n */\nexport const getOffsetTopDistance = (\n  el: HTMLElement,\n  containerEl: HTMLElement\n) => {\n  return Math.abs(getOffsetTop(el) - getOffsetTop(containerEl));\n};\n\n/**\n * 节点在浏览器窗口中的位置\n * @param{domNode} element 起始节点\n */\nexport function getElementOffsetRoot(element: any) {\n  if (!element) return { left: 0, top: 0 };\n\n  let actualTop = element.offsetTop;\n  let actualLeft = element.offsetLeft;\n  let current = element.offsetParent;\n\n  while (current !== null) {\n    actualTop += current.offsetTop;\n    actualLeft += current.offsetLeft;\n\n    current = current.offsetParent;\n  }\n\n  const scroll = getTotalScrollOffsetRoot(element);\n  return {\n    top: actualTop - scroll.height,\n    left: actualLeft - scroll.width,\n  };\n}\n\n/**\n * 在执行元素上触发指定的事件，且可传递自定义事件\n *\n * @param el\n * @param eventType\n * @param detail\n *\n * eg：triggerEvent(document.getElementById('id'), 'click', {name: '123'})\n */\nexport function triggerEvent(\n  el: HTMLElement,\n  eventType: string,\n  detail: PlainObject\n) {\n  el.dispatchEvent(new CustomEvent(eventType, { detail }));\n}\n\n/**\n * 查找指定具备ClassName的父节点\n * @param pClassName\n * @param currentTarget\n * @param rootNode\n * @returns\n */\nexport function lookupParentNodeByClassName(\n  pClassName: string,\n  currentTarget: HTMLElement,\n  rootNode: HTMLElement\n) {\n  if (currentTarget === rootNode) {\n    return null;\n  }\n\n  if (rootNode && !rootNode.contains(currentTarget)) {\n    return null;\n  }\n\n  let tmp: HTMLElement | null = currentTarget;\n  while (tmp !== null && tmp !== rootNode) {\n    const classList = tmp.classList;\n    if (classList.contains(pClassName)) {\n      return tmp;\n    }\n\n    tmp = tmp.parentElement;\n  }\n\n  return null;\n}\n\n/**\n * DOM事件代理\n *\n * @param pEl\n * @param cb\n * @param itemClass\n */\nexport function clickProxy(\n  pEl: HTMLElement,\n  cb: (target: HTMLElement) => void,\n  itemClass = \"item\"\n) {\n  on(pEl, \"click\", (event) => {\n    const target = lookupParentNodeByClassName(\n      itemClass,\n      event.target as HTMLElement,\n      pEl\n    );\n    if (!target) return;\n\n    cb(target);\n  });\n}\n\n/**\n * 判断指定元素是否在可视窗口中\n *\n * @param el\n * @param partiallyVisible true为完全可见；false为完全可见\n */\nexport function elementIsVisibleInViewport(\n  el: HTMLElement,\n  partiallyVisible = false\n) {\n  const { top, left, bottom, right } = el.getBoundingClientRect();\n  const { innerHeight, innerWidth } = window;\n  return partiallyVisible\n    ? ((top > 0 && top < innerHeight) ||\n        (bottom > 0 && bottom < innerHeight)) &&\n        ((left > 0 && left < innerWidth) || (right > 0 && right < innerWidth))\n    : top >= 0 && left >= 0 && bottom <= innerHeight && right <= innerWidth;\n}\n\n/**\n * 是否滚动到底部\n *\n * @param target\n * @returns\n */\nexport function isScrollBottom(target: HTMLElement) {\n  const clientHeight = target.clientHeight;\n  const scrollTop = target.scrollTop;\n  const scrollHeight = target.scrollHeight;\n\n  if (scrollHeight - scrollTop === clientHeight) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * 获取浏览器窗口的大小\n */\nexport function getViewport() {\n  if (document.compatMode === \"BackCompat\") {\n    return {\n      width: document.body.clientWidth,\n      height: document.body.clientHeight,\n    };\n  } else {\n    return {\n      width: document.documentElement.clientWidth,\n      height: document.documentElement.clientHeight,\n    };\n  }\n}\n\n/**\n * 相对于根节点的所有滚动总和\n * @param{domNode} element 起始节点\n */\nexport function getTotalScrollOffsetRoot(element: any) {\n  let width = 0,\n    height = 0;\n\n  let pNode = element.parentNode;\n  while (pNode !== null && pNode !== document) {\n    width += pNode.scrollLeft;\n    height += pNode.scrollTop;\n\n    pNode = pNode.parentNode;\n  }\n\n  return { width: width, height: height };\n}\n\n/**\n * 将字符串拷贝到粘贴板\n * @param str\n * @returns\n */\nexport function copyToClipboard(str: string) {\n  const el = document.createElement(\"textarea\");\n  el.value = str;\n  el.setAttribute(\"readonly\", \"readonly\");\n  el.style.position = \"absolute\";\n  el.style.left = \"-9999px\";\n  document.body.appendChild(el);\n\n  const selection = window.getSelection();\n\n  el.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(el);\n\n  if (!selection) return;\n\n  const selected = selection.rangeCount > 0 ? selection.getRangeAt(0) : false;\n  if (selected) {\n    selection.removeAllRanges();\n    selection.addRange(selected);\n  }\n}\n\n/**\n * 通过a标签下载文件\n * @param url\n * @returns\n */\nexport function downFileByUrl(url: string) {\n  if (!url) return;\n\n  const fileName = url.slice(url.lastIndexOf(\"/\") + 1, url.length);\n\n  const tempLink = document.createElement(\"a\");\n  tempLink.style.display = \"none\";\n  tempLink.href = url;\n  tempLink.setAttribute(\"download\", decodeURI(fileName)); // 兼容：某些浏览器不支持HTML5的download属性\n\n  if (typeof tempLink.download === \"undefined\") {\n    tempLink.setAttribute(\"target\", \"_blank\");\n  }\n\n  document.body.appendChild(tempLink);\n  tempLink.click();\n  document.body.removeChild(tempLink);\n}\n\n/**\n * 将Blob数据一文件形式下载\n * @param binary 待转换的二进制数据\n * @param filename 待下载的文件名 res.headers['content-disposition'].match(/filename=(.*)/)[1];\n * @param type MIME 类型 res.headers['content-type']\n */\nexport function convertRes2Blob(binary: any, filename: string, type: string) {\n  // 将二进制流转为blob\n  const blob = new Blob([binary], { type });\n  if (typeof window.navigator.msSaveBlob !== \"undefined\") {\n    // 兼容IE，window.navigator.msSaveBlob：以本地方式保存文件\n    window.navigator.msSaveBlob(blob, decodeURI(filename));\n  } else {\n    // 创建新的URL并指向File对象或者Blob对象的地址\n    const blobURL = window.URL.createObjectURL(blob);\n\n    const tempLink = document.createElement(\"a\");\n    tempLink.style.display = \"none\";\n    tempLink.href = blobURL;\n    tempLink.setAttribute(\"download\", decodeURI(filename)); // 兼容：某些浏览器不支持HTML5的download属性\n\n    if (typeof tempLink.download === \"undefined\") {\n      tempLink.setAttribute(\"target\", \"_blank\");\n    }\n\n    document.body.appendChild(tempLink);\n    tempLink.click();\n    document.body.removeChild(tempLink);\n    window.URL.revokeObjectURL(blobURL);\n  }\n}\n","/**\n * 将时间统一转化为Date标准格式\n *\n * @param time\n * @returns\n */\nfunction toDate(time: Date | string | number): Date {\n  if (typeof time === \"object\") {\n    return time;\n  }\n\n  if (typeof time === \"string\") {\n    if (/^[0-9]+$/.test(time)) {\n      time = parseInt(time);\n    } else {\n      // 将ISO Date格式修改为GMT的时间格式\n      // 2021-02-26T04:02:57:677Z\n      // 2021-02-26T04:02:57.677Z\n      time = time.replace(/:(.{3}z)$/gi, (str, $1) => {\n        return `.${$1}`;\n      });\n    }\n  }\n\n  if (typeof time === \"number\" && time.toString().length === 10) {\n    time = time * 1000;\n  }\n\n  return new Date(time as number);\n}\n\n/**\n * 解析时间\n *\n * @param time\n * @param format\n * @returns\n */\nexport function parseTime(\n  time: Date | string | number,\n  format = \"{y}-{m}-{d} {h}:{i}:{s}\"\n): string | null {\n  if (arguments.length === 0 || !time) {\n    return null;\n  }\n\n  const date: Date = toDate(time);\n\n  const formatObj = {\n    y: date.getFullYear(),\n    m: date.getMonth() + 1,\n    d: date.getDate(),\n    h: date.getHours(),\n    i: date.getMinutes(),\n    s: date.getSeconds(),\n    a: date.getDay(),\n  };\n  const time_str = format.replace(/{([ymdhisa])+}/g, (result, key) => {\n    const value = (formatObj as any)[key];\n    if (key === \"a\") {\n      return [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"][value];\n    }\n    return value.toString().padStart(2, \"0\");\n  });\n  return time_str;\n}\n\n/**\n * 将时间格式化\n *\n * @param time\n * @param option\n * @returns\n */\nexport function formatTime(time: Date | string | number, option?: string) {\n  const d = toDate(time);\n  const now = Date.now();\n  const diff = (now - (d as any)) / 1000;\n\n  if (diff < 30) {\n    return \"刚刚\";\n  } else if (diff < 3600) {\n    return Math.ceil(diff / 60) + \"分钟前\";\n  } else if (diff < 3600 * 24) {\n    return Math.ceil(diff / 3600) + \"小时前\";\n  } else if (diff < 3600 * 24 * 2) {\n    return \"1天前\";\n  }\n\n  return parseTime(time, option);\n}\n","// 全局事件车\n\nimport mitt, { Handler, EventType, Emitter, WildcardHandler } from \"mitt\";\n\nconst ENVENT_BUS_INSTANCES = new Map();\n\ntype CustomEmitter = Emitter & {\n  once<T = any>(type: EventType, handler: Handler<T>): void;\n  once(type: \"*\", handler: WildcardHandler): void;\n};\n\n/**\n * 生成事件车\n *\n * @returns\n */\nfunction makeOneBus() {\n  const bus: CustomEmitter = mitt() as CustomEmitter;\n\n  // 仅触发一次的事件\n  bus.once = (eventType: EventType, handler: Handler) => {\n    const listener = function (...args: unknown[]) {\n      if (handler) {\n        handler.apply(this, args as any);\n      }\n      bus.off(eventType, listener);\n    };\n    bus.on(eventType, listener);\n  };\n\n  return bus;\n}\n\n/**\n * 获取事件车实例\n *\n * @param instanceName\n * @returns\n */\nexport function getBus(instanceName: string): CustomEmitter {\n  if (!instanceName) {\n    throw new Error(`Event Bus Require One Instance Name`);\n  }\n\n  let ins = ENVENT_BUS_INSTANCES.get(instanceName);\n  if (ins) {\n    return ins;\n  }\n\n  ins = makeOneBus();\n  ENVENT_BUS_INSTANCES.set(instanceName, ins);\n\n  return ins;\n}\n\n/**\n * 销毁所有的事件车\n */\nexport function destoryAllBus() {\n  ENVENT_BUS_INSTANCES.clear();\n}\n","/**\n * IP地址\n */\nexport const REGEXP_IP =\n  /^((2[0-4]\\d|25[0-5]|[01]?\\d\\d?)\\.){3}(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)$/;\n\n/**\n * 字符串\n */\nexport const REGEXP_STRING = /^[a-zA-Z0-9-_:：（）\\(\\)\\u4e00-\\u9fa5]{1,30}$/;\n"],"names":["makeRandom","Math","random","Date","toString","replace","slice","camelCase","str","tmp","substr","$1","toUpperCase","upperFirst","trim","rgbToHex","color","values","split","r","parseInt","g","b","padStart","hexToRgba","alp","exec","a","rgbaToRgb","parseFloat","floor","rr","gg","bb","encode","base64","btoa","window","encodeURIComponent","decode","decodeURIComponent","atob","isObject","val","getObjectType","obj","Array","deepClone","type","res","Object","keys","forEach","key","item","push","getCookie","name","ca","document","cookie","i","len","length","c","charAt","substring","indexOf","throttle","fn","wait","that","timer","rest","setTimeout","call","debounce","clearTimeout","bind","lastItem","list","isArray","Set","from","Map","stringify","replacer","entries","spaces","JSON","asyncSequentializer","toPromise","x","Promise","resolve","results","reduce","lastPromise","currentPromise","then","shift","poll","validate","interval","resolver","reject","result","valid","findFirstLeafNode","arr","childKey","undefined","child","makeTree","data","config","id","pid","_id","_pid","map","_map","__id__","__pid__","set","pItem","Reflect","deleteProperty","getDeviceType","test","navigator","userAgent","parseURLParameters","url","match","v","s","on","element","event","handler","useCapture","addEventListener","off","removeEventListener","once","el","listener","args","apply","hasClass","cls","Error","classList","contains","className","addClass","curClass","classes","j","clsName","add","removeClass","remove","getStyle","styleName","style","defaultView","computed","getComputedStyle","e","setStyle","value","prop","removeStyle","isScroll","isVertical","determinedDirection","overflow","getScrollContainer","parent","documentElement","includes","parentNode","isInContainer","container","elRect","getBoundingClientRect","containerRect","top","right","innerWidth","bottom","innerHeight","left","getOffsetTop","offset","offsetTop","offsetParent","getOffsetTopDistance","containerEl","abs","getElementOffsetRoot","actualTop","actualLeft","offsetLeft","current","scroll","getTotalScrollOffsetRoot","height","width","triggerEvent","eventType","detail","dispatchEvent","CustomEvent","lookupParentNodeByClassName","pClassName","currentTarget","rootNode","parentElement","clickProxy","pEl","cb","itemClass","target","elementIsVisibleInViewport","partiallyVisible","isScrollBottom","clientHeight","scrollTop","scrollHeight","getViewport","compatMode","body","clientWidth","pNode","scrollLeft","copyToClipboard","createElement","setAttribute","position","appendChild","selection","getSelection","select","execCommand","removeChild","selected","rangeCount","getRangeAt","removeAllRanges","addRange","downFileByUrl","fileName","lastIndexOf","tempLink","display","href","decodeURI","download","click","convertRes2Blob","binary","filename","blob","Blob","msSaveBlob","blobURL","URL","createObjectURL","revokeObjectURL","toDate","time","parseTime","format","arguments","date","formatObj","y","getFullYear","m","getMonth","d","getDate","h","getHours","getMinutes","getSeconds","getDay","time_str","formatTime","option","now","diff","ceil","ENVENT_BUS_INSTANCES","makeOneBus","bus","mitt","getBus","instanceName","ins","get","destoryAllBus","clear","REGEXP_IP","REGEXP_STRING"],"mappings":"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"}